<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>QuShuXian é­…å½±ä¸­å›½</title>
  
  <subtitle>æ•°æ®åˆ†æå¸ˆå’ŒAiæœºå™¨å­¦ä¹ é¢†åŸŸç ”ç©¶è€…</subtitle>
  <link href="https://qushuxian.github.io/atom.xml" rel="self"/>
  
  <link href="https://qushuxian.github.io/"/>
  <updated>2022-11-17T03:12:25.000Z</updated>
  <id>https://qushuxian.github.io/</id>
  
  <author>
    <name>æ›²ä¹¦è´¤</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>MaxComputeåˆ›å»ºåŸºäºpythonçš„UDFå‡½æ•°å¹¶å¼•ç”¨ç¬¬ä¸‰æ–¹åŒ…</title>
    <link href="https://qushuxian.github.io/page/guidebook/max_compute_udf/"/>
    <id>https://qushuxian.github.io/page/guidebook/max_compute_udf/</id>
    <published>2022-11-17T03:12:25.000Z</published>
    <updated>2022-11-17T03:12:25.000Z</updated>
    
    <content type="html"><![CDATA[<p>MaxComputeåˆ›å»ºåŸºäºpythonçš„UDFå‡½æ•°å¹¶å¼•ç”¨ç¬¬ä¸‰æ–¹åŒ…ï¼Œä¾‹å¦‚UDFä¸­ä½¿ç”¨pandasåŒ…åŠå…¶ä¾èµ–çš„å…¶ä»–ç¬¬ä¸‰æ–¹åŒ…ã€‚</p><span id="more"></span><br><h3 id="æœ€ç»ˆå®ç°æ•ˆæœ"><a class="markdownIt-Anchor" href="#æœ€ç»ˆå®ç°æ•ˆæœ"></a> æœ€ç»ˆå®ç°æ•ˆæœ</h3><p><img src="https://raw.githubusercontent.com/qushuxian/static_files/main/image-20221117114015971.png" alt="image-20221117114015971" /></p><br><br><h3 id="å‰ææ¡ä»¶"><a class="markdownIt-Anchor" href="#å‰ææ¡ä»¶"></a> å‰ææ¡ä»¶</h3><ol><li>MaxComputeé›†ç¾¤å·²å®‰è£…Pythonç¯å¢ƒï¼Œè¯¥æ¡ˆä¾‹ä¸­Pythonæ˜¯3.7ç‰ˆæœ¬</li><li>å·²å®‰è£…å¹¶é…ç½®<a href="https://help.aliyun.com/document_detail/27971.htm?spm=a2c4g.11186623.0.0.1e9c5d47hNlJbS#concept-dvj-dzw-5db">MaxComputeå®¢æˆ·ç«¯</a></li></ol><br><br><h3 id="ä½¿ç”¨pandasåŒ…"><a class="markdownIt-Anchor" href="#ä½¿ç”¨pandasåŒ…"></a> ä½¿ç”¨pandasåŒ…</h3><p>ç”±äºé›†ç¾¤ä¸­Pythonæ˜¯3.7ç‰ˆæœ¬ï¼Œæ‰€ä»¥ä½¿ç”¨pandasåŒ…ç‰ˆæœ¬ä¹Ÿå¿…é¡»ä½¿ç”¨cp37ï¼Œè¯¥æ¡ˆä¾‹ä»¥pandas 1.1.5ç‰ˆæœ¬ä¸ºåŸºç¡€ã€‚</p><ol><li><p>åœ¨<a href="https://pypi.org/project/pandas/1.3.5/#history">PyPI</a>é¡µé¢çš„<strong>Release history</strong>åŒºåŸŸæ‰¾åˆ°1.1.5ç‰ˆæœ¬ï¼Œå•å‡»<strong>Download files</strong>åæ‰¾åˆ°æ–‡ä»¶åä¸º<strong>pandas-1.1.5-cp37-cp37m-manylinux1_x86_64.whl</strong>çš„pandasåŒ…è¿›è¡Œä¸‹è½½ã€‚</p><p><img src="https://raw.githubusercontent.com/qushuxian/static_files/main/image-20221117134558114.png" alt="image-20221117134558114" /></p></li><li><p>ä¿®æ”¹ä¸‹è½½çš„pandasåŒ…åç¼€ä¸ºzipæ ¼å¼</p></li><li><p>é€šè¿‡<a href="https://help.aliyun.com/document_detail/27971.htm#concept-dvj-dzw-5db">MaxComputeå®¢æˆ·ç«¯</a>ä¸Šä¼ pandasåŒ…è‡³MaxComputeé¡¹ç›®ç©ºé—´ï¼Œå¦‚æœå®¢æˆ·ç«¯ä½¿ç”¨çš„æ˜¯æœ¬åœ°ç»ˆç«¯ï¼Œpandas-1.1.5-cp37-cp37m-manylinux1_x86_64.zipä¹Ÿå¯ä»¥ä¸ºç»å¯¹è·¯å¾„ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">odpscmd -e &quot;use abi_ods_dev; add archive pandas-1.1.5-cp37-cp37m-manylinux1_x86_64.zip -f&quot;</span><br></pre></td></tr></table></figure></li><li><p>åœ¨DataWorksçš„<code>ä¸šåŠ¡æµç¨‹/ä½ çš„ä¸šåŠ¡æµç¨‹åç§°/MaxCompute/èµ„æº/</code>ç›®å½•ä¸‹åˆ›å»ºPythonè„šæœ¬ï¼Œæ­¤å¤„ä»¥udf_temp_qu.pyä¸ºä¾‹ï¼Œè¯¦ç»†çš„UDFä»£ç ç»“æ„è¯·å‚è§<a href="https://help.aliyun.com/document_detail/154431.html">Python 3 UDF</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> odps.udf <span class="keyword">import</span> annotate</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="meta">@annotate(<span class="params"><span class="string">&quot;bigint, bigint-&gt;string&quot;</span></span>)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SampleUDF</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">import</span> sys</span><br><span class="line">        sys.path.insert(<span class="number">0</span>, <span class="string">&#x27;work/pandas-1.1.5-cp37-cp37m-manylinux1_x86_64.zip&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">evaluate</span>(<span class="params">self, arg0, arg1</span>):</span></span><br><span class="line">        <span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">        df = pd.DataFrame([&#123;<span class="string">&#x27;arg0&#x27;</span>: arg0, <span class="string">&#x27;arg1&#x27;</span>: arg1&#125;])</span><br><span class="line">        df[<span class="string">&#x27;arg2&#x27;</span>] = df[<span class="string">&#x27;arg0&#x27;</span>] + df[<span class="string">&#x27;arg1&#x27;</span>]</span><br><span class="line">        <span class="keyword">return</span> json.dumps(df.to_dict())</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>ä¿å­˜udf_temp_qu.pyå¹¶æäº¤</p><p><img src="https://raw.githubusercontent.com/qushuxian/static_files/main/image-20221117135642065.png" alt="image-20221117135642065" /></p></li><li><p>åœ¨DataWorksçš„<code>ä¸šåŠ¡æµç¨‹/ä½ çš„ä¸šåŠ¡æµç¨‹åç§°/MaxCompute/å‡½æ•°/</code>ç›®å½•ä¸‹åˆ›å»ºUDFå‡½æ•°ï¼Œæ­¤å¤„ä»¥udf_temp_quä¸ºä¾‹ï¼Œèµ„æºåˆ—è¡¨ä¸­éœ€è¦å¼•ç”¨ç¬¬5æ­¥çš„èµ„æºåç§°å’Œpandasçš„èµ„æº</p><p><img src="https://raw.githubusercontent.com/qushuxian/static_files/main/image-20221117135851076.png" alt="image-20221117135851076" /></p></li><li><p>ä¿å­˜udf_temp_quå¹¶æäº¤</p></li><li><p>æµ‹è¯•UDFå‡½æ•°</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> odps.sql.python.version<span class="operator">=</span>cp37;</span><br><span class="line"><span class="keyword">select</span> udf_temp_qu(<span class="number">1</span>,<span class="number">2</span>);</span><br></pre></td></tr></table></figure><p>ä»æµ‹è¯•ç»“æœæ¥çœ‹ï¼Œæç¤ºpandasåŒ…ä¾èµ–çš„å…¶ä»–ç¬¬ä¸‰æ–¹åŒ…ç¼ºå¤±ã€ä¾‹å¦‚numpyç­‰</p><p><img src="https://raw.githubusercontent.com/qushuxian/static_files/main/image-20221117140305439.png" alt="image-20221117140305439" /></p></li><li><p>åˆ°pandasçš„å®˜æ–¹<a href="https://github.com/pandas-dev/pandas/tree/1.1.x">GitHub1.1.x</a>æ–‡æ¡£å¯ä»¥çœ‹åˆ°ï¼Œpandasä¾èµ–äº†3ä¸ªç¬¬ä¸‰æ–¹åŒ…ï¼Œç„¶åä¸‹è½½å¯¹åº”PyPIä¸Šä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„whlåŒ…</p><p><img src="https://raw.githubusercontent.com/qushuxian/static_files/main/image-20221117141817917.png" alt="image-20221117141817917" /></p></li><li><p>å°†æ–°ä¸‹è½½çš„ç¬¬ä¸‰æ–¹åŒ…é‡å¤æ‰§è¡Œç¬¬ä¸€æ­¥åˆ°ç¬¬ä¸ƒæ­¥</p></li><li><p>å¤§åŠŸå‘Šæˆ</p></li></ol><p><img src="https://raw.githubusercontent.com/qushuxian/static_files/main/image-20221117142331157.png" alt="image-20221117142331157" /></p><br><p>æœ€åå†çœ‹ä¸€ä¸‹èµ„æºå’Œå‡½æ•°çš„é…ç½®</p><table><thead><tr><th><img src="https://raw.githubusercontent.com/qushuxian/static_files/main/image-20221117142853385.png" alt="image-20221117142853385" /></th><th><img src="https://raw.githubusercontent.com/qushuxian/static_files/main/image-20221117142804534.png" alt="image-20221117142804534" /></th></tr></thead><tbody></tbody></table>]]></content>
    
    
    <summary type="html">&lt;p&gt;MaxComputeåˆ›å»ºåŸºäºpythonçš„UDFå‡½æ•°å¹¶å¼•ç”¨ç¬¬ä¸‰æ–¹åŒ…ï¼Œä¾‹å¦‚UDFä¸­ä½¿ç”¨pandasåŒ…åŠå…¶ä¾èµ–çš„å…¶ä»–ç¬¬ä¸‰æ–¹åŒ…ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="æ–‡ç« åˆ†ç±»" scheme="https://qushuxian.github.io/categories/%E6%96%87%E7%AB%A0%E5%88%86%E7%B1%BB/"/>
    
    
    <category term="æ ‡ç­¾1" scheme="https://qushuxian.github.io/tags/%E6%A0%87%E7%AD%BE1/"/>
    
    <category term="æ ‡ç­¾2" scheme="https://qushuxian.github.io/tags/%E6%A0%87%E7%AD%BE2/"/>
    
  </entry>
  
  <entry>
    <title>Pythonå¿«é€Ÿåˆå¹¶å¤šä¸ªå­—æ®µæ’åºä¸è§„èŒƒå’Œç¼ºå¤±çš„Excelæ–‡ä»¶</title>
    <link href="https://qushuxian.github.io/page/guidebook/concat_excel/"/>
    <id>https://qushuxian.github.io/page/guidebook/concat_excel/</id>
    <published>2021-11-17T03:16:59.000Z</published>
    <updated>2021-11-17T03:16:59.000Z</updated>
    
    <content type="html"><![CDATA[<p>å‡ è¡Œä»£ç å®ç°æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰ä¸è§„èŒƒã€å­—æ®µå‚å·®ä¸é½çš„Excelè¡¨æ ¼çš„å¿«é€Ÿåˆå¹¶ã€‚</p><span id="more"></span><p>æœ¬æ–‡ç« ä½¿ç”¨çš„è¡¨æ ¼å¦‚ä¸‹ï¼š</p><p><a href="%E8%A1%A8%E6%A0%BC1.xlsx">è¡¨æ ¼1</a></p><p><a href="%E8%A1%A8%E6%A0%BC2.xlsx">è¡¨æ ¼2</a></p><p><a href="%E8%A1%A8%E6%A0%BC3.xlsx">è¡¨æ ¼3</a></p><p><a href="%E8%A1%A8%E6%A0%BC4.xlsx">è¡¨æ ¼4</a></p><br><p>å‡è®¾æœ‰3ä¸ªEXCELè¡¨æ ¼ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥æœ‰æ— ç©·å¤šä¸ªã€‚</p><p><strong>Excelè¡¨æ ¼1</strong></p><table><thead><tr><th>çœä»½</th><th>åŸå¸‚</th><th>æ—¥æœŸ</th><th>äººå£</th></tr></thead><tbody><tr><td>æ²³å—</td><td>éƒ‘å·</td><td>2021-03</td><td>620</td></tr><tr><td>æ²³å—</td><td>æ´›é˜³</td><td>2021-03</td><td>340</td></tr><tr><td>ä¸Šæµ·</td><td>ä¸Šæµ·</td><td>2021-03</td><td>1200</td></tr><tr><td>æ±Ÿè‹</td><td>è‹å·</td><td>2021-03</td><td>530</td></tr><tr><td>æ±Ÿè‹</td><td>å—äº¬</td><td>2021-03</td><td>624</td></tr></tbody></table><br><p><strong>Excelè¡¨æ ¼2</strong></p><table><thead><tr><th>æ—¥æœŸ</th><th>çœä»½</th><th>åŸå¸‚</th><th>åŸå¸‚ç­‰çº§</th><th>äººå£</th></tr></thead><tbody><tr><td>2021-10</td><td>æ²³å—</td><td>éƒ‘å·</td><td>äºŒçº¿</td><td>620</td></tr><tr><td>2021-10</td><td>æ²³å—</td><td>æ´›é˜³</td><td>ä¸‰çº¿</td><td>340</td></tr><tr><td>2021-10</td><td>ä¸Šæµ·</td><td>ä¸Šæµ·</td><td>è¶…ä¸€çº¿</td><td>1200</td></tr><tr><td>2021-10</td><td>æ±Ÿè‹</td><td>è‹å·</td><td>ä¸€çº¿</td><td>530</td></tr><tr><td>2021-10</td><td>æ±Ÿè‹</td><td>å—äº¬</td><td>ä¸€çº¿</td><td>624</td></tr></tbody></table><br><p><strong>Excelè¡¨æ ¼3</strong></p><table><thead><tr><th>æ—¥æœŸ</th><th>çœä»½</th><th>åŸå¸‚</th><th>åŸå¸‚ç­‰çº§</th><th>äººå£</th><th>äººå‡æ”¶å…¥</th></tr></thead><tbody><tr><td>2021-11</td><td>æ²³å—</td><td>éƒ‘å·</td><td>äºŒçº¿</td><td>620</td><td>12000</td></tr><tr><td>2021-11</td><td>æ²³å—</td><td>æ´›é˜³</td><td>ä¸‰çº¿</td><td>340</td><td>5605</td></tr><tr><td>2021-11</td><td>ä¸Šæµ·</td><td>ä¸Šæµ·</td><td>è¶…ä¸€çº¿</td><td>1200</td><td>12328</td></tr><tr><td>2021-11</td><td>æ±Ÿè‹</td><td>è‹å·</td><td>ä¸€çº¿</td><td>530</td><td>8900</td></tr><tr><td>2021-11</td><td>æ±Ÿè‹</td><td>å—äº¬</td><td>ä¸€çº¿</td><td>624</td><td>9640</td></tr></tbody></table><p>å¯¹æ¯”3ä¸ªè¡¨æ ¼ï¼š</p><ol><li>æ¯ä¸ªè¡¨æ ¼çš„åˆ—é¡ºåºéƒ½ä¸å°½ç›¸åŒ</li><li>æ¯ä¸ªè¡¨æ ¼é‡Œçš„å­—æ®µéƒ½ä¸å°½ç›¸åŒ</li><li>ä½†æœ‰ä¸€ä¸ªè¡¨æ ¼3é‡Œè¾¹çš„å­—æ®µæ¶µç›–äº†è¡¨æ ¼1å’Œè¡¨æ ¼2ä¸­çš„æ‰€æœ‰åˆ—ï¼Œå½“ç„¶ä¹Ÿæœ‰ä¸€ç§å¯èƒ½å°±æ˜¯æ²¡æœ‰ä¸€ä¸ªè¡¨æ ¼å­—æ®µæ¶µç›–æ‰€æœ‰å…¶ä»–è¡¨æ ¼çš„ï¼Œä¾‹å¦‚æ–°å¢ä¸€ä¸ªè¡¨æ ¼4</li></ol><br><p><strong>Excelè¡¨æ ¼4</strong></p><table><thead><tr><th>æ—¥æœŸ</th><th>çœä»½</th><th>åŸå¸‚</th><th>äººå‡æ”¶å…¥</th><th>åŒºåŸŸè´Ÿè´£äºº</th></tr></thead><tbody><tr><td>2021-11</td><td>æ²³å—</td><td>éƒ‘å·</td><td>12000</td><td>å¼ ä¸‰</td></tr><tr><td>2021-11</td><td>æ²³å—</td><td>æ´›é˜³</td><td>5605</td><td>å¼ ä¸‰</td></tr><tr><td>2021-11</td><td>ä¸Šæµ·</td><td>ä¸Šæµ·</td><td>12328</td><td>æå››</td></tr><tr><td>2021-11</td><td>æ±Ÿè‹</td><td>è‹å·</td><td>8900</td><td>æå››</td></tr><tr><td>2021-11</td><td>æ±Ÿè‹</td><td>å—äº¬</td><td>9640</td><td>æå››</td></tr></tbody></table><br><br><p><strong>å„ä¸ªExcelè¡¨æ ¼å­—æ®µå¯¹æ¯”</strong></p><table><thead><tr><th>è¡¨æ ¼1å­—æ®µ</th><th>è¡¨æ ¼2å­—æ®µ</th><th>è¡¨æ ¼3å­—æ®µ</th><th>è¡¨æ ¼4å­—æ®µ</th></tr></thead><tbody><tr><td>çœä»½</td><td>æ—¥æœŸ</td><td>æ—¥æœŸ</td><td>æ—¥æœŸ</td></tr><tr><td>åŸå¸‚</td><td>çœä»½</td><td>çœä»½</td><td>çœä»½</td></tr><tr><td>æ—¥æœŸ</td><td>åŸå¸‚</td><td>åŸå¸‚</td><td>åŸå¸‚</td></tr><tr><td>äººå£</td><td>åŸå¸‚ç­‰çº§</td><td>åŸå¸‚ç­‰çº§</td><td>äººå‡æ”¶å…¥</td></tr><tr><td></td><td>äººå£</td><td>äººå£</td><td>åŒºåŸŸè´Ÿè´£äºº</td></tr><tr><td></td><td></td><td>äººå‡æ”¶å…¥</td><td></td></tr></tbody></table><p>ç°åœ¨çš„éœ€æ±‚æ˜¯æŠŠ4ä¸ªè¡¨æ ¼å¿«é€Ÿçš„åˆå¹¶ä¸º1ä¸ªè¡¨æ ¼ï¼Œä½†å¦‚ä¸Šè¡¨æ ¼ã€æ²¡æœ‰ç»Ÿä¸€çš„ä¸€ä¸ªè¡¨æ ¼ä¸­çš„å­—æ®µæ¶µç›–äº†æ‰€æœ‰è¡¨æ ¼ï¼Œæ¯ä¸ªè¡¨æ ¼çš„å­—æ®µé¡ºåºéƒ½ä¸ä¸€æ ·ï¼Œso FKUã€‚ã€‚ã€‚ã€‚ã€‚   ğŸ˜„å“ˆå“ˆå“ˆå“ˆ</p><br><br><p>å®ç°4ä¸ªè¡¨æ ¼çš„é€»è¾‘ä¸»è¦å¦‚ä¸‹ï¼š</p><ol><li>æ‰¾å‡ºæ‰€æœ‰è¡¨æ ¼çš„å­—æ®µåå­—å¹¶å»é‡</li><li>å¾ªç¯æ¯ä¸ªè¡¨æ ¼ï¼Œç¬¬ä¸€æ­¥è·å–åˆ°çš„å­—æ®µåç§°å¦‚æœåœ¨å½“å‰å¾ªç¯çš„è¡¨æ ¼ä¸å­˜åœ¨ã€åˆ™åˆ›å»ºå­—æ®µå¹¶èµ‹å€¼ä¸ºç©º</li></ol><p>å¯¹ï¼Œå°±2æ­¥â€¦</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ ¹æ®æ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼Œè·å–æ‰€æœ‰DFçš„keyå’Œæ•°æ®</span></span><br><span class="line">paths = <span class="string">&#x27;/guidebook/concat_excel/&#x27;</span></span><br><span class="line">keys_list = []</span><br><span class="line">df_list = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> os.listdir(paths):</span><br><span class="line">    df = pd.read_excel(paths + i)</span><br><span class="line">    keys_list.append(<span class="built_in">list</span>(df.keys()))</span><br><span class="line">    df_list.append(df)</span><br><span class="line"></span><br><span class="line"><span class="comment"># keys_liståˆå¹¶å»é‡</span></span><br><span class="line">df_key = []</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> keys_list:</span><br><span class="line">    <span class="keyword">for</span> k <span class="keyword">in</span> item:</span><br><span class="line">        df_key.append(k)</span><br><span class="line">df_key = <span class="built_in">list</span>(<span class="built_in">set</span>(df_key))</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå¹¶4ä¸ªè¡¨æ ¼ï¼Œå¦‚æœæŸä¸€ä¸ªè¡¨æ ¼å­—æ®µç¼ºå¤±åˆ™è¡¥å……è¯¥å­—æ®µå¹¶èµ‹å€¼ä¸ºç©º</span></span><br><span class="line">df_excel = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> df_list:</span><br><span class="line">    <span class="keyword">for</span> k <span class="keyword">in</span> i.keys():</span><br><span class="line">        <span class="keyword">if</span> k <span class="keyword">not</span> <span class="keyword">in</span> i.keys():</span><br><span class="line">            i[k] = np.NaN</span><br><span class="line">    df_excel.append(i)</span><br><span class="line">DataFrame = pd.concat([df <span class="keyword">for</span> df <span class="keyword">in</span> df_excel])</span><br><span class="line">DataFrame.reset_index(drop=<span class="literal">True</span>, inplace=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><p>åˆå¹¶ä¹‹åçš„è¡¨æ ¼æ•ˆæœå¦‚ä¸‹</p><p><img src="image-20211123152842007.png" alt="image-20211123152842007" /></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;å‡ è¡Œä»£ç å®ç°æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰ä¸è§„èŒƒã€å­—æ®µå‚å·®ä¸é½çš„Excelè¡¨æ ¼çš„å¿«é€Ÿåˆå¹¶ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="python" scheme="https://qushuxian.github.io/categories/python/"/>
    
    
    <category term="PythonåŠå…¬è‡ªåŠ¨åŒ–" scheme="https://qushuxian.github.io/tags/Python%E5%8A%9E%E5%85%AC%E8%87%AA%E5%8A%A8%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>è°ƒç”¨Pythonçš„openpyxlåŒ…å¯¹Excelè¡¨æ ¼è¿›è¡Œç¾åŒ–</title>
    <link href="https://qushuxian.github.io/page/guidebook/openpyxl_beautiful_excel/"/>
    <id>https://qushuxian.github.io/page/guidebook/openpyxl_beautiful_excel/</id>
    <published>2021-10-27T03:03:43.000Z</published>
    <updated>2021-10-27T03:03:43.000Z</updated>
    
    <content type="html"><![CDATA[<p>Pythonä¸­è¿ç”¨openpyxlåŒ…å¯¹Excelè¡¨æ ¼è¿›è¡Œç¾åŒ–ï¼ŒåŒ…æ‹¬å­—ä½“æ ·å¼è°ƒæ•´ã€å•å…ƒæ ¼å¯¹é½æ–¹å¼è°ƒæ•´ã€å•å…ƒæ ¼è¾¹æ¡†è°ƒæ•´ã€å•å…ƒæ ¼èƒŒæ™¯é¢œè‰²è°ƒæ•´ã€è¡Œé«˜å’Œåˆ—å®½è°ƒæ•´ã€‚</p><span id="more"></span><br><p><br><br></p><p>ä½¿ç”¨çš„Pythonä¸­openpyxlåŒ…çš„ç‰ˆæœ¬ä¸º3.0.5</p><p><strong>å…ˆçœ‹å®é™…ç¾åŒ–å‰åçš„æ•ˆæœå¯¹æ¯”</strong></p><p><img src="image-20211027111105037.png" alt="image-20211027111105037" /></p><p>è¯¦ç»†çš„å¼€å‘ä»£ç å¦‚ä¸‹ï¼Œä»£ç å½“ä¸­å¯¹å…³é”®ä¿¡æ¯è¿›è¡Œäº†è¯´æ˜ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># =====================================================================</span></span><br><span class="line"><span class="comment"># @Author : Shuxian.Qu</span></span><br><span class="line"><span class="comment"># @Email : qushuxian@gmail.com</span></span><br><span class="line"><span class="comment"># @File : beautiful_excel.py</span></span><br><span class="line"><span class="comment"># @CreateTime : 2021-10-26 10:13</span></span><br><span class="line"><span class="comment"># @Software : PyCharm</span></span><br><span class="line"><span class="comment"># @Comment : ç¾åŒ–Excel</span></span><br><span class="line"><span class="comment"># =====================================================================</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> openpyxl <span class="keyword">import</span> load_workbook, utils</span><br><span class="line"><span class="keyword">from</span> openpyxl.styles <span class="keyword">import</span> Font, PatternFill, Border, Side, Alignment</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BeautifulExcel</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, path, sheet_name</span>):</span></span><br><span class="line">        self.path = path</span><br><span class="line">        self.sheet_name = sheet_name</span><br><span class="line">        self.excel_df = load_workbook(path)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">insert_row</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        åœ¨Excelä¸­æ’å…¥æŒ‡å®šè¡Œ</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self.excel_df[self.sheet_name].insert_rows(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">insert_value</span>(<span class="params">self, row, start_row, end_row, value</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        åœ¨Excelçš„æ’å…¥æŒ‡å®šè¡Œä¸­æ’å…¥æŒ‡å®šå€¼</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        :param row: è¡Œå·</span></span><br><span class="line"><span class="string">        :param start_row: å¼€å§‹æ’å…¥è¡Œå•å…ƒæ ¼çš„åæ ‡</span></span><br><span class="line"><span class="string">        :param end_row: ç»“æŸæ’å…¥è¡Œå•å…ƒæ ¼çš„åæ ‡</span></span><br><span class="line"><span class="string">        :param value:  æ’å…¥çš„å€¼</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="comment"># æŒ‡å®šä½ç½®æ’å…¥æŒ‡å®šå€¼</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">int</span>(start_row), <span class="built_in">int</span>(end_row)+<span class="number">1</span>):</span><br><span class="line">            self.excel_df[self.sheet_name].cell(row=<span class="built_in">int</span>(row), column=i).value = value</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">merge_cells</span>(<span class="params">self, start_row, start_column, end_row, end_column</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        åˆå¹¶å•å…ƒæ ¼</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        :param start_row: åˆå¹¶å•å…ƒæ ¼èµ·å§‹è¡Œå·</span></span><br><span class="line"><span class="string">        :param start_column: åˆå¹¶å•å…ƒæ ¼èµ·å§‹è¡Œå·ä¸­çš„èµ·å§‹åˆ—å·</span></span><br><span class="line"><span class="string">        :param end_row: åˆå¹¶å•å…ƒæ ¼ç»“æŸè¡Œå·</span></span><br><span class="line"><span class="string">        :param end_column: åˆå¹¶å•å…ƒæ ¼ç»“æŸè¡Œå·çš„ç»“æŸåˆ—å·</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self.excel_df[self.sheet_name].merge_cells(start_row=start_row, start_column=start_column, end_row=end_row, end_column=end_column)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_styles</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="comment"># è·å–è¡¨æ ¼æœ‰å¤šå°‘è¡Œï¼Ÿå¤šå°‘åˆ—ï¼Ÿ</span></span><br><span class="line">        rows, columns = self.excel_df[self.sheet_name].max_row, self.excel_df[self.sheet_name].max_column</span><br><span class="line"></span><br><span class="line">        <span class="comment"># å®šä¹‰å­—ä½“æ ·å¼</span></span><br><span class="line">        fonts = Font(name=<span class="string">&#x27;å¾®è½¯é›…é»‘&#x27;</span>, size=<span class="number">12</span>, color=<span class="string">&#x27;000000&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># å®šä¹‰å•å…ƒæ ¼å¯¹é½æ–¹å¼</span></span><br><span class="line">        alignments = Alignment(horizontal=<span class="string">&#x27;center&#x27;</span>, vertical=<span class="string">&#x27;center&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># å®šä¹‰å•å…ƒæ ¼è¾¹æ¡†é¢œè‰²</span></span><br><span class="line">        sides = Side(border_style=<span class="string">&#x27;thin&#x27;</span>, color=<span class="string">&#x27;797979&#x27;</span>)</span><br><span class="line">        borders = Border(left=sides, right=sides, top=sides, bottom=sides)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># å®šä¹‰å•å…ƒæ ¼èƒŒæ™¯é¢œè‰²</span></span><br><span class="line">        fills = PatternFill(<span class="string">&quot;solid&quot;</span>, fgColor=<span class="string">&quot;FFBB02&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># å®šä¹‰è¡Œé«˜å’Œåˆ—å®½</span></span><br><span class="line">        heights, widths = <span class="number">15</span>, <span class="number">20</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="built_in">int</span>(rows)+<span class="number">1</span>):</span><br><span class="line">            <span class="keyword">for</span> r <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="built_in">int</span>(columns)+<span class="number">1</span>):</span><br><span class="line">                self.excel_df[self.sheet_name].cell(row=i, column=r).font = fonts</span><br><span class="line">                self.excel_df[self.sheet_name].cell(row=i, column=r).alignment = alignments</span><br><span class="line">                self.excel_df[self.sheet_name].cell(row=i, column=r).border = borders</span><br><span class="line">                self.excel_df[self.sheet_name].cell(row=i, column=r).fill = fills</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> h <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="built_in">int</span>(rows)+<span class="number">1</span>):</span><br><span class="line">            self.excel_df[self.sheet_name].row_dimensions[h].height = heights</span><br><span class="line">        <span class="keyword">for</span> w <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="built_in">int</span>(columns)+<span class="number">1</span>):</span><br><span class="line">            self.excel_df[self.sheet_name].column_dimensions[utils.get_column_letter(w)].width = widths</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">save</span>(<span class="params">self</span>):</span></span><br><span class="line">        self._styles()</span><br><span class="line">        self.excel_df.save(self.path)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">be = BeautifulExcel(path=<span class="string">&#x27;/Users/qushuxian/Downloads/test.xlsx&#x27;</span>, sheet_name=<span class="string">&#x27;Sheet1&#x27;</span>)</span><br><span class="line">be.insert_row()</span><br><span class="line">be.insert_value(row=<span class="number">1</span>, start_row=<span class="number">1</span>, end_row=<span class="number">4</span>, value=<span class="string">&#x27;æ¯æ—¥é”€å”®é¢ç»Ÿè®¡&#x27;</span>)</span><br><span class="line">be.merge_cells(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">4</span>)</span><br><span class="line">be.save()</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;Pythonä¸­è¿ç”¨openpyxlåŒ…å¯¹Excelè¡¨æ ¼è¿›è¡Œç¾åŒ–ï¼ŒåŒ…æ‹¬å­—ä½“æ ·å¼è°ƒæ•´ã€å•å…ƒæ ¼å¯¹é½æ–¹å¼è°ƒæ•´ã€å•å…ƒæ ¼è¾¹æ¡†è°ƒæ•´ã€å•å…ƒæ ¼èƒŒæ™¯é¢œè‰²è°ƒæ•´ã€è¡Œé«˜å’Œåˆ—å®½è°ƒæ•´ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="Excel" scheme="https://qushuxian.github.io/categories/Excel/"/>
    
    
    <category term="PythonåŠå…¬è‡ªåŠ¨åŒ–" scheme="https://qushuxian.github.io/tags/Python%E5%8A%9E%E5%85%AC%E8%87%AA%E5%8A%A8%E5%8C%96/"/>
    
    <category term="openpyxl" scheme="https://qushuxian.github.io/tags/openpyxl/"/>
    
  </entry>
  
  <entry>
    <title>å¤šçº¿ç¨‹çˆ¬è™«ä»£ç†ä¹‹éšæœºè·å–UserAgent</title>
    <link href="https://qushuxian.github.io/page/guidebook/random_user_agent/"/>
    <id>https://qushuxian.github.io/page/guidebook/random_user_agent/</id>
    <published>2021-10-25T08:35:32.000Z</published>
    <updated>2021-10-25T08:35:32.000Z</updated>
    
    <content type="html"><![CDATA[<p>è‡ªåŠ¨è·å–çˆ¬è™«çš„requestè¯·æ±‚å¤´ä¸­çš„user-agentä»£ç†æœåŠ¡ï¼Œæä¾›IEæµè§ˆå™¨ã€operaæµè§ˆå™¨ã€chromeæµè§ˆå™¨ã€firefoxæµè§ˆå™¨ã€safariæµè§ˆå™¨çš„ä¼ªè£…ä»£ç†æœåŠ¡ã€‚</p><span id="more"></span><br><br><br><p>è¯¥ç¨‹åºåŸºäºfake_useragentåŒ…è¿›è¡Œçš„äºŒæ¬¡å¼€å‘ï¼Œéœ€è¦å…ˆå®‰è£…<code>pip install fake_useragent</code>ï¼Œå¹¶è‡ªå®šä¹‰äº†get()å‡½æ•°ï¼Œå‡½æ•°ä¸­è®¾ç½®numberçš„ç”¨äºä¸»è¦æ˜¯ä¸ºäº†å¤šçº¿ç¨‹çˆ¬è™«ä½¿ç”¨ï¼Œä¾‹å¦‚ä½¿ç”¨mapè¿›è¡Œå¹¶è¡Œè®¡ç®—ç­‰ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> fake_useragent <span class="keyword">import</span> UserAgent</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get</span>(<span class="params">number=<span class="literal">None</span></span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    é»˜è®¤éšæœºè¿”å›ä¸€ç»„é•¿åº¦ä¸ºnumberå’Œ1çš„UserAgent</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    :param number: éœ€è¦è¿”å›UserAgentçš„åˆ—è¡¨é•¿åº¦ï¼Œé»˜è®¤7</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    ua = UserAgent()</span><br><span class="line">    word = [ua.ie, ua.opera, ua.chrome, ua.firefox, ua.safari, ua.msie, ua.google]</span><br><span class="line">    <span class="keyword">if</span> number <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        user_agent_list = word</span><br><span class="line">        <span class="keyword">return</span> user_agent_list, random.choice(user_agent_list)</span><br><span class="line">    <span class="keyword">elif</span> <span class="built_in">int</span>(number) &gt; <span class="number">0</span>:</span><br><span class="line">        numbers = [n <span class="keyword">for</span> n <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">int</span>(number))]</span><br><span class="line">        user_agent_list = [random.choice(word) <span class="keyword">for</span> i <span class="keyword">in</span> numbers]</span><br><span class="line">        <span class="keyword">return</span> user_agent_list, random.choice(word)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;è‡ªåŠ¨è·å–çˆ¬è™«çš„requestè¯·æ±‚å¤´ä¸­çš„user-agentä»£ç†æœåŠ¡ï¼Œæä¾›IEæµè§ˆå™¨ã€operaæµè§ˆå™¨ã€chromeæµè§ˆå™¨ã€firefoxæµè§ˆå™¨ã€safariæµè§ˆå™¨çš„ä¼ªè£…ä»£ç†æœåŠ¡ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="çˆ¬è™«" scheme="https://qushuxian.github.io/categories/%E7%88%AC%E8%99%AB/"/>
    
    
    <category term="UserAgent" scheme="https://qushuxian.github.io/tags/UserAgent/"/>
    
    <category term="å¤šçº¿ç¨‹" scheme="https://qushuxian.github.io/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>pythonæ•°æ®å¤„ç†å¸¸ç”¨æ–¹æ³•é›†åˆ</title>
    <link href="https://qushuxian.github.io/page/guidebook/python_def/"/>
    <id>https://qushuxian.github.io/page/guidebook/python_def/</id>
    <published>2021-09-14T02:42:52.000Z</published>
    <updated>2021-09-14T02:42:52.000Z</updated>
    
    <content type="html"><![CDATA[<p>è¯·åœ¨æ­¤å¤„é˜æ˜æ–‡ç« æ‘˜è¦æ–¹ä¾¿æ–‡ç« åˆ—è¡¨é¡µå±•ç°ã€‚</p><span id="more"></span><br><h1 id="pandas"><a class="markdownIt-Anchor" href="#pandas"></a> pandas</h1><h4 id="æ‹¼æ¥å¤šä¸ªdf"><a class="markdownIt-Anchor" href="#æ‹¼æ¥å¤šä¸ªdf"></a> æ‹¼æ¥å¤šä¸ªdf</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a = pd.DataFrame(&#123;<span class="string">&#x27;a&#x27;</span>:[i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">5</span>)], <span class="string">&#x27;b&#x27;</span>:[i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">11</span>, <span class="number">15</span>)]&#125;)</span><br><span class="line">b = pd.DataFrame(&#123;<span class="string">&#x27;a&#x27;</span>:[i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">101</span>, <span class="number">105</span>)], <span class="string">&#x27;b&#x27;</span>:[i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">111</span>, <span class="number">115</span>)]&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‚æ•°axis=0æ˜¯çºµå‘æ‹¼æ¥</span></span><br><span class="line">DataFrame = pd.concat([df <span class="keyword">for</span> df <span class="keyword">in</span> [a, b]])</span><br><span class="line"><span class="comment"># æ‹¼æ¥ä¹‹åæ›´æ–°index</span></span><br><span class="line">DataFrame.reset_index(drop=<span class="literal">True</span>, inplace=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><h1 id="dict"><a class="markdownIt-Anchor" href="#dict"></a> Dict</h1><h4 id="å‘å­—å…¸æ·»åŠ keyå’Œvalue"><a class="markdownIt-Anchor" href="#å‘å­—å…¸æ·»åŠ keyå’Œvalue"></a> å‘å­—å…¸æ·»åŠ keyå’Œvalue</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ·»åŠ çš„keyä¸å­˜åœ¨åˆ™ä¼šæ·»åŠ ã€å¦åˆ™è¦†ç›–</span></span><br><span class="line">dicts = &#123;</span><br><span class="line">    <span class="string">&#x27;t1&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>,],</span><br><span class="line">    <span class="string">&#x27;t2&#x27;</span>: [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>,]</span><br><span class="line">&#125;</span><br><span class="line">dicts.update(&#123;<span class="string">&#x27;t3&#x27;</span>: <span class="number">1</span>&#125;)</span><br><span class="line">Out: &#123;<span class="string">&#x27;t1&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="string">&#x27;t2&#x27;</span>: [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], <span class="string">&#x27;t3&#x27;</span>: <span class="number">1</span>&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">dicts = &#123;</span><br><span class="line">    <span class="string">&#x27;t1&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>,],</span><br><span class="line">    <span class="string">&#x27;t2&#x27;</span>: [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>,]</span><br><span class="line">&#125;</span><br><span class="line">dicts.update(&#123;<span class="string">&#x27;t1&#x27;</span>: <span class="number">1</span>&#125;)</span><br><span class="line">Out: &#123;<span class="string">&#x27;t1&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;t2&#x27;</span>: [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]&#125;</span><br></pre></td></tr></table></figure><h1 id="list"><a class="markdownIt-Anchor" href="#list"></a> List</h1><h4 id="åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨"><a class="markdownIt-Anchor" href="#åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨"></a> åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">lists = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="string">&#x27;t1&#x27;</span>, <span class="string">&#x27;t2&#x27;</span>]</span><br><span class="line"><span class="keyword">if</span> <span class="string">&#x27;t1&#x27;</span> <span class="keyword">in</span> lists:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Y&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤æŒ‡å®šå…ƒç´ "><a class="markdownIt-Anchor" href="#åˆ é™¤æŒ‡å®šå…ƒç´ "></a> åˆ é™¤æŒ‡å®šå…ƒç´ </h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lists = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="string">&#x27;t1&#x27;</span>, <span class="string">&#x27;t2&#x27;</span>]</span><br><span class="line">lists.remove(<span class="string">&#x27;t1&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="åˆ—è¡¨å…ƒç´ åˆå¹¶"><a class="markdownIt-Anchor" href="#åˆ—è¡¨å…ƒç´ åˆå¹¶"></a> åˆ—è¡¨å…ƒç´ åˆå¹¶</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;_&#x27;</span>.join([<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;4&#x27;</span>,<span class="string">&#x27;5&#x27;</span>]))</span><br></pre></td></tr></table></figure><h1 id="å­—ç¬¦ä¸²å¤„ç†"><a class="markdownIt-Anchor" href="#å­—ç¬¦ä¸²å¤„ç†"></a> å­—ç¬¦ä¸²å¤„ç†</h1><h4 id="æ¨¡ç³ŠæŸ¥è¯¢å…ƒç´ "><a class="markdownIt-Anchor" href="#æ¨¡ç³ŠæŸ¥è¯¢å…ƒç´ "></a> æ¨¡ç³ŠæŸ¥è¯¢å…ƒç´ </h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> difflib</span><br><span class="line"></span><br><span class="line">list1 = [<span class="string">&#x27;qqaabb&#x27;</span>, <span class="string">&#x27;wweerr&#x27;</span>, <span class="string">&#x27;121&#x27;</span>, <span class="string">&#x27;qbcd&#x27;</span>, <span class="string">&#x27;plqs&#x27;</span>]</span><br><span class="line"><span class="comment"># word=æ¨¡ç³ŠåŒ¹é…çš„å…³é”®å­—</span></span><br><span class="line"><span class="comment"># possibilities=åˆ—è¡¨</span></span><br><span class="line"><span class="comment"># n=è¿”å›çš„æ•°é‡ï¼Œå¦‚æœæœ‰å¤šä¸ªç¬¦åˆæ¨¡ç³ŠåŒ¹é…æ¡ä»¶ï¼ŒæŒ‰ç…§åŒ¹é…ç¨‹åº¦ä»é«˜åˆ°ä½æ’åº</span></span><br><span class="line"><span class="comment"># cutoff=æ¨¡ç³ŠåŒ¹é…ç™¾åˆ†æ¯”ï¼Œ1ä»£è¡¨å®Œå…¨åŒ¹é…</span></span><br><span class="line">data = difflib.get_close_matches(<span class="string">&#x27;qs&#x27;</span>, list1, <span class="number">1</span>, cutoff=<span class="number">0.5</span>)</span><br></pre></td></tr></table></figure><h1 id="os"><a class="markdownIt-Anchor" href="#os"></a> OS</h1><h4 id="åˆ—ä¸¾å½“å‰è·¯å¾„ä¸­çš„æ–‡ä»¶åç§°"><a class="markdownIt-Anchor" href="#åˆ—ä¸¾å½“å‰è·¯å¾„ä¸­çš„æ–‡ä»¶åç§°"></a> åˆ—ä¸¾å½“å‰è·¯å¾„ä¸­çš„æ–‡ä»¶åç§°</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.listdir()</span><br></pre></td></tr></table></figure><h1 id="if"><a class="markdownIt-Anchor" href="#if"></a> IF</h1><h4 id="ä¸€è¡Œif"><a class="markdownIt-Anchor" href="#ä¸€è¡Œif"></a> ä¸€è¡Œif</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="string">&#x27;1&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="number">1</span> <span class="keyword">if</span> a == <span class="string">&#x27;1&#x27;</span> <span class="keyword">else</span> <span class="number">0</span>)</span><br></pre></td></tr></table></figure><h4 id=""><a class="markdownIt-Anchor" href="#"></a> </h4>]]></content>
    
    
    <summary type="html">&lt;p&gt;è¯·åœ¨æ­¤å¤„é˜æ˜æ–‡ç« æ‘˜è¦æ–¹ä¾¿æ–‡ç« åˆ—è¡¨é¡µå±•ç°ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="python" scheme="https://qushuxian.github.io/categories/python/"/>
    
    
    <category term="pandas" scheme="https://qushuxian.github.io/tags/pandas/"/>
    
    <category term="list" scheme="https://qushuxian.github.io/tags/list/"/>
    
    <category term="dict" scheme="https://qushuxian.github.io/tags/dict/"/>
    
    <category term="æ•°æ®æ¸…æ´—" scheme="https://qushuxian.github.io/tags/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97/"/>
    
  </entry>
  
  <entry>
    <title>pythonæ•°æ®æ¸…æ´—ä¹‹mapå’Œreduceå‡½æ•°çš„ä½¿ç”¨æ–¹æ³•</title>
    <link href="https://qushuxian.github.io/page/guidebook/map_reduce/"/>
    <id>https://qushuxian.github.io/page/guidebook/map_reduce/</id>
    <published>2021-08-16T02:21:20.000Z</published>
    <updated>2021-08-16T02:21:20.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ–‡ç« ä¸»è¦å®ç°çš„æ˜¯ä½¿ç”¨mapå¯¹ä¼ å…¥çš„åºåˆ—ä¸­æ¯ä¸ªå…ƒç´ è¿›è¡Œè®¡ç®—ï¼Œä½¿ç”¨reduceå¯¹ä¼ å…¥çš„åºåˆ—ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ è¿›è¡Œè®¡ç®—åå¾—åˆ°è®¡ç®—ç»“æœã€å†å°†è¿™ä¸ªç»“æœå¯¹ä¸‹ä¸€ä¸ªå…ƒç´ è¿›è¡Œè®¡ç®—ï¼Œç›´è‡³ç»“æŸã€‚åœ¨ä½¿ç”¨Pythonæ•°æ®æ¸…æ´—æ—¶ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°å¯ä»¥æœ‰æ•ˆå‡å°‘ä»£ç å†—ä½™ã€æå‡è®¡ç®—æ•ˆç‡ç­‰ã€‚</p><span id="more"></span><br><br><blockquote><p>æœ¬ç¯‡æ–‡ç« æ—¢ç„¶è®²Pythonæ•°æ®æ¸…æ´—å¸¸ç”¨çš„mapå’Œreduceå‡½æ•°ï¼Œé‚£ä¹ˆé¦–å…ˆè¯´æ˜ä¸‹ä¸¤ä¸ªå‡½æ•°çš„ä¸åŒç‚¹ï¼Œä»¥ä¾¿æœ‰å‡ ä¸ªç®€å•çš„å°è±¡ã€‚</p><p><strong>å‚æ•°ä¸åŒ</strong></p><ol><li>mapæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯åºåˆ—(åˆ—è¡¨)ï¼Œå‡½æ•°å¯ä»¥æ¥æ”¶ä¸€ä¸ªæˆ–å¤šä¸ªå‚æ•°ã€‚</li><li>reduceæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯åºåˆ—(åˆ—è¡¨)ï¼Œä½†å‡½æ•°åªèƒ½æ¥æ”¶ä¸¤ä¸ªå‚æ•°ã€‚</li></ol><p><strong>è®¡ç®—é€»è¾‘ä¸åŒ</strong></p><p>map()æ˜¯å°†ä¼ å…¥çš„å‡½æ•°ä¾æ¬¡ä½œç”¨åˆ°åºåˆ—çš„æ¯ä¸ªå…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯ç‹¬è‡ªè¢«å‡½æ•°è®¡ç®—ä¸€æ¬¡ï¼›</p><p>reduce()æ˜¯å°†ä¼ äººçš„å‡½æ•°ä½œç”¨åœ¨åºåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ å¹¶å¾—åˆ°ç»“æœåï¼ŒæŠŠè¿™ä¸ªç»“æœç»§ç»­ä¸ä¸‹ä¸€ä¸ªå…ƒç´ ä½œç”¨ï¼Œç›´åˆ°åºåˆ—ç»“æŸï¼›</p><p>ä¸‹é¢å°†é€šè¿‡å®é™…çš„æ¡ˆä¾‹è¿›è¡Œè¯´æ˜ã€‚</p></blockquote><br><h1 id="mapå‡½æ•°çš„åº”ç”¨åœºæ™¯"><a class="markdownIt-Anchor" href="#mapå‡½æ•°çš„åº”ç”¨åœºæ™¯"></a> mapå‡½æ•°çš„åº”ç”¨åœºæ™¯</h1><p><code>map</code>å‡½æ•°æ¥æ”¶ä¸¤ä¸ªè¾“å…¥å‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å‡½æ•°(ä»…æ¥å—ä¸€ä¸ªå‚æ•°)ã€ç¬¬äºŒä¸ªå‚æ•°æ˜¯<code>Iterable</code>ï¼Œç”±äº<code>Iterator</code>æ˜¯æƒ°æ€§åºåˆ—( æƒ°æ€§æ˜¯æŒ‡ä½ ä¸ä¸»åŠ¨å»éå†è®¡ç®—å®ƒï¼Œå°±ä¸ä¼šè®¡ç®—å…¶ä¸­å…ƒç´ çš„å€¼)ï¼Œå› æ­¤é€šè¿‡<code>list()</code>å‡½æ•°è®©å®ƒæŠŠæ•´ä¸ªåºåˆ—éƒ½è®¡ç®—å‡ºæ¥å¹¶è¿”å›ä¸€ä¸ªlistã€‚</p><p><code>map</code>å‡½æ•°å°†ä¼ å…¥çš„å‡½æ•°ä¾æ¬¡è®¡ç®—åˆ°ä¼ å…¥åºåˆ—çš„æ¯ä¸ªå…ƒç´ ï¼Œå¹¶æŠŠç»“æœä½œä¸ºæ–°çš„<code>Iterator</code>è¿”å›ã€‚</p><p><code>map</code>å‡½æ•°åœ¨Pythonæ•°æ®æ¸…æ´—æ—¶è¿­ä»£è®¡ç®—çš„å¯¹è±¡æ˜¯åˆ—è¡¨ï¼ˆä¹Ÿå°±æ˜¯è¯´åªè¦æ•°æ®æ”¾åˆ°åˆ—è¡¨ä¸­å°±è¡Œï¼Œç†è®ºä¸Šåˆ—è¡¨é‡Œä¹Ÿå¯ä»¥æ˜¯å­—å…¸ã€dfã€seriesç­‰ç­‰ï¼‰ï¼Œä¸»è¦çš„åº”ç”¨åœºæ™¯åŒ…æ‹¬ï¼š</p><ol><li>åˆ—è¡¨çš„æ•°å­¦è¿ç®—</li><li>åˆ—è¡¨çš„æ ¼å¼è½¬æ¢</li><li>åˆ—è¡¨çš„å­—ç¬¦ä¸²åˆ†å‰²</li></ol><br><h2 id="mapå‡½æ•°åº”ç”¨æ¡ˆä¾‹"><a class="markdownIt-Anchor" href="#mapå‡½æ•°åº”ç”¨æ¡ˆä¾‹"></a> mapå‡½æ•°åº”ç”¨æ¡ˆä¾‹</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">%%timeit</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">function_map</span>(<span class="params">x</span>):</span></span><br><span class="line">    <span class="keyword">return</span> x * x</span><br><span class="line">r = <span class="built_in">list</span>(<span class="built_in">map</span>(function_map, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]))</span><br><span class="line"></span><br><span class="line"><span class="number">996</span> ns Â± <span class="number">25.5</span> ns per loop (mean Â± std. dev. of <span class="number">7</span> runs, <span class="number">1000000</span> loops each)</span><br></pre></td></tr></table></figure><p>ä¸Šè¾¹æ˜¯å¯¹list=[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]ä¸­çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œäº†2æ¬¡æ–¹çš„è®¡ç®—ï¼Œä»£ç æ‰§è¡Œæ—¶é•¿çº¦996çº³ç§’ã€‚</p><p>åŒæ—¶ï¼Œmapçš„è®¡ç®—è¿‡ç¨‹ä¹Ÿå¯ä»¥é€šè¿‡forå¾ªç¯çš„æ–¹å¼è®¡ç®—ï¼Œä½†å¾ªç¯çš„è®¡ç®—æ•ˆç‡å°†æå¤§åœ°ä¸‹é™ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">%%timeit</span><br><span class="line">items = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br><span class="line">squared = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> items:</span><br><span class="line">    squared.append(i**<span class="number">2</span>)</span><br><span class="line">    </span><br><span class="line"><span class="number">3.12</span> Âµs Â± <span class="number">162</span> ns per loop (mean Â± std. dev. of <span class="number">7</span> runs, <span class="number">100000</span> loops each)</span><br></pre></td></tr></table></figure><p>ä¸Šè¾¹åŒæ ·æ˜¯å¯¹list=[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]ä¸­çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œäº†2æ¬¡æ–¹çš„è®¡ç®—ï¼Œä»£ç æ‰§è¡Œæ—¶é•¿çº¦3.12å¾®ç§’ï¼Œ1å¾®å¦™=1000çº³ç§’ï¼Œä¹Ÿå°±æ˜¯è¯´mapçš„è®¡ç®—æ—¶é—´æ¯”forå¾ªç¯çš„è®¡ç®—æ—¶é—´ç¼©çŸ­äº†3å€ï¼Œmapå®Œèƒœã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">%%timeit</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">function_map</span>(<span class="params">x, y, z</span>):</span></span><br><span class="line">    <span class="keyword">return</span> x + y + z</span><br><span class="line">x1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">x2 = [<span class="number">1</span>, <span class="number">1</span>, <span class="number">6</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">x3 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">s = <span class="built_in">map</span>(function_map, <span class="built_in">zip</span>(x1, x2, x3))</span><br><span class="line"></span><br><span class="line"><span class="number">429</span> ns Â± <span class="number">12.3</span> ns per loop (mean Â± std. dev. of <span class="number">7</span> runs, <span class="number">1000000</span> loops each)</span><br></pre></td></tr></table></figure><p>ä»è®¡ç®—è¿‡ç¨‹çœ‹å¾—å‡ºæ¥<code>map</code>ä½œä¸ºé«˜é˜¶å‡½æ•°ã€å®ƒäº‹å®ä¸ŠæŠŠè¿ç®—è§„åˆ™æŠ½è±¡äº†ã€é‚£ä¹ˆä¹Ÿå°±å¯ä»¥åœ¨ç°å®å·¥ä½œä¸­è¿›è¡Œå¤æ‚çš„é€»è¾‘è®¡ç®—ã€‚</p><br><br><h1 id="reduceå‡½æ•°çš„åº”ç”¨å†…åœºæ™¯"><a class="markdownIt-Anchor" href="#reduceå‡½æ•°çš„åº”ç”¨å†…åœºæ™¯"></a> reduceå‡½æ•°çš„åº”ç”¨å†…åœºæ™¯</h1><p><code>reduce</code>å‡½æ•°åŒæ ·æ˜¯æ¥æ”¶ä¸¤ä¸ªè¾“å…¥å‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å‡½æ•°(ä»…æ¥å—ä¸¤ä¸ªå‚æ•°)ã€ç¬¬äºŒä¸ªå‚æ•°æ˜¯<code>Iterable</code>ï¼Œç»†å¿ƒçš„æœ‹å‹ä»¬å¯èƒ½ä¼šå‘ç°è¿™ä¸¤ä¸ªå‡½æ•°æœ‰ä¸€ä¸ªä¸åŒç‚¹ï¼Œé‚£å°±æ˜¯<strong>ç¬¬ä¸€ä¸ªå‚æ•°å‡½æ•°æ¥å—çš„è¾“å…¥å‚æ•°ä¸ªæ•°ä¸åŒï¼Œ<code>map</code>å‡½æ•°ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å‡½æ•°åªèƒ½æ¥å—ä¸€ä¸ªå‚æ•°çš„è¾“å…¥ï¼Œè€Œ<code>reduce</code>å‡½æ•°ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å‡½æ•°å¯ä»¥æ¥å—ä¸¤ä¸ªå‚æ•°çš„è¾“å…¥ï¼Œè¿™åœ¨ä¸åŒç¨‹åº¦è§£å†³æ‰äº†å¾ˆå¤§è®¡ç®—å¼€é”€çš„é—®é¢˜ã€‚</strong></p><p><code>reduce</code>å‡½æ•°åœ¨è¿­ä»£åºåˆ—çš„è¿‡ç¨‹ä¸­ï¼Œé¦–å…ˆæŠŠåˆ—è¡¨ä¸­ <strong>å‰ä¸¤ä¸ªå…ƒç´ </strong>ï¼ˆåªèƒ½ä¸¤ä¸ªï¼‰ä¼ ç»™ <strong>å‡½æ•°</strong>ï¼Œå‡½æ•°åŠ å·¥åï¼Œç„¶åæŠŠ <strong>å¾—åˆ°çš„ç»“æœå’Œç¬¬ä¸‰ä¸ªå…ƒç´ </strong> ä½œä¸ºä¸¤ä¸ªå‚æ•°ä¼ ç»™å‡½æ•°å‚æ•°ï¼Œ ä¾æ¬¡ç±»æ¨ç›´è‡³ç»“æŸã€‚</p><p><code>reduce</code>å‡½æ•°åœ¨Pythonæ•°æ®æ¸…æ´—æ—¶è¿­ä»£è®¡ç®—çš„å¯¹è±¡æ˜¯åˆ—è¡¨ï¼ˆä¹Ÿå°±æ˜¯è¯´åªè¦æ•°æ®æ”¾åˆ°åˆ—è¡¨ä¸­å°±è¡Œï¼Œç†è®ºä¸Šåˆ—è¡¨é‡Œä¹Ÿå¯ä»¥æ˜¯å­—å…¸ã€dfã€seriesç­‰ç­‰ï¼‰ï¼Œä¸»è¦çš„åº”ç”¨åœºæ™¯åŒ…æ‹¬ï¼š</p><ol><li>å¤šä¸ªæ•°æ®æ¡†join</li><li>åˆ—è¡¨çš„é€’æ¨è®¡ç®—</li></ol><h2 id="reduceå‡½æ•°åº”ç”¨æ¡ˆä¾‹-å¤šä¸ªæ•°æ®æ¡†join"><a class="markdownIt-Anchor" href="#reduceå‡½æ•°åº”ç”¨æ¡ˆä¾‹-å¤šä¸ªæ•°æ®æ¡†join"></a> reduceå‡½æ•°åº”ç”¨æ¡ˆä¾‹-å¤šä¸ªæ•°æ®æ¡†join</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">function_reduce</span>(<span class="params">x, y</span>):</span></span><br><span class="line">    <span class="keyword">return</span> pd.merge(x, y, how=<span class="string">&#x27;left&#x27;</span>, on=[<span class="string">&#x27;id&#x27;</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">t1 = pd.DataFrame(&#123;<span class="string">&#x27;id&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], <span class="string">&#x27;name&#x27;</span>: [<span class="string">&#x27;å¼ ä¸€&#x27;</span>, <span class="string">&#x27;å¼ äºŒ&#x27;</span>, <span class="string">&#x27;å¼ ä¸‰&#x27;</span>, <span class="string">&#x27;å¼ å››&#x27;</span>, <span class="string">&#x27;å¼ äº”&#x27;</span>]&#125;)</span><br><span class="line">t2 = pd.DataFrame(&#123;<span class="string">&#x27;id&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], <span class="string">&#x27;city&#x27;</span>: [<span class="string">&#x27;ä¸Šæµ·&#x27;</span>, <span class="string">&#x27;åŒ—äº¬&#x27;</span>, <span class="string">&#x27;æˆéƒ½&#x27;</span>, <span class="string">&#x27;é‡åº†&#x27;</span>, <span class="string">&#x27;æ·±åœ³&#x27;</span>]&#125;)</span><br><span class="line">t3 = pd.DataFrame(&#123;<span class="string">&#x27;id&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], <span class="string">&#x27;occupation&#x27;</span>: [<span class="string">&#x27;åˆ†æå¸ˆ&#x27;</span>, <span class="string">&#x27;å·¥ç¨‹å¸ˆ&#x27;</span>, <span class="string">&#x27;é”€å”®&#x27;</span>, <span class="string">&#x27;HR&#x27;</span>, <span class="string">&#x27;å‰å°&#x27;</span>]&#125;)</span><br><span class="line"></span><br><span class="line">tf = reduce(function_reduce, [t1, t2, t3])</span><br><span class="line"></span><br><span class="line">out:</span><br><span class="line">   <span class="built_in">id</span> name city occupation</span><br><span class="line">    <span class="number">0</span>   <span class="number">1</span>   å¼ ä¸€   ä¸Šæµ·        åˆ†æå¸ˆ</span><br><span class="line">    <span class="number">1</span>   <span class="number">2</span>   å¼ äºŒ   åŒ—äº¬        å·¥ç¨‹å¸ˆ</span><br><span class="line">    <span class="number">2</span>   <span class="number">3</span>   å¼ ä¸‰   æˆéƒ½         é”€å”®</span><br><span class="line">    <span class="number">3</span>   <span class="number">4</span>   å¼ å››   é‡åº†         HR</span><br><span class="line">    <span class="number">4</span>   <span class="number">5</span>   å¼ äº”   æ·±åœ³         å‰å°</span><br></pre></td></tr></table></figure><h2 id="reduceå‡½æ•°åº”ç”¨æ¡ˆä¾‹-å¤šä¸ªæ•°æ®é›†ä¸­çš„å¹¶é›†å’Œäº¤é›†"><a class="markdownIt-Anchor" href="#reduceå‡½æ•°åº”ç”¨æ¡ˆä¾‹-å¤šä¸ªæ•°æ®é›†ä¸­çš„å¹¶é›†å’Œäº¤é›†"></a> reduceå‡½æ•°åº”ç”¨æ¡ˆä¾‹-å¤šä¸ªæ•°æ®é›†ä¸­çš„å¹¶é›†å’Œäº¤é›†</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">%%timeit</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">function_reduce</span>(<span class="params">x, y</span>):</span></span><br><span class="line">    <span class="keyword">return</span> x &amp; y</span><br><span class="line">sets = [&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;, &#123;<span class="number">1</span>, <span class="number">5</span>&#125;, &#123;<span class="number">2</span>, <span class="number">5</span>, <span class="number">1</span>&#125;]</span><br><span class="line">s = reduce(function_reduce, sets)</span><br><span class="line"><span class="number">640</span> ns Â± <span class="number">29</span> ns per loop (mean Â± std. dev. of <span class="number">7</span> runs, <span class="number">1000000</span> loops each)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">%%timeit</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">function_reduce</span>(<span class="params">x, y</span>):</span></span><br><span class="line">    <span class="keyword">return</span> x | y</span><br><span class="line">sets = [&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;, &#123;<span class="number">1</span>, <span class="number">5</span>&#125;, &#123;<span class="number">2</span>, <span class="number">5</span>, <span class="number">1</span>&#125;]</span><br><span class="line">s = reduce(function_reduce, sets)</span><br><span class="line"><span class="number">751</span> ns Â± <span class="number">31.6</span> ns per loop (mean Â± std. dev. of <span class="number">7</span> runs, <span class="number">1000000</span> loops each)</span><br></pre></td></tr></table></figure><h2 id="reduceå‡½æ•°åº”ç”¨æ¡ˆä¾‹-è½¬æ¢æ ¼å¼å¹¶ç´¯ç§¯è®¡ç®—"><a class="markdownIt-Anchor" href="#reduceå‡½æ•°åº”ç”¨æ¡ˆä¾‹-è½¬æ¢æ ¼å¼å¹¶ç´¯ç§¯è®¡ç®—"></a> reduceå‡½æ•°åº”ç”¨æ¡ˆä¾‹-è½¬æ¢æ ¼å¼å¹¶ç´¯ç§¯è®¡ç®—</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">%%timeit</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">function_reduce</span>(<span class="params">x, y</span>):</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">int</span>(x) + <span class="built_in">int</span>(y)</span><br><span class="line">ls1 = [<span class="built_in">str</span>(i) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)]</span><br><span class="line"><span class="built_in">sum</span> = reduce(function_reduce, ls1)</span><br><span class="line"><span class="number">3.62</span> Âµs Â± <span class="number">285</span> ns per loop (mean Â± std. dev. of <span class="number">7</span> runs, <span class="number">100000</span> loops each)</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;æ–‡ç« ä¸»è¦å®ç°çš„æ˜¯ä½¿ç”¨mapå¯¹ä¼ å…¥çš„åºåˆ—ä¸­æ¯ä¸ªå…ƒç´ è¿›è¡Œè®¡ç®—ï¼Œä½¿ç”¨reduceå¯¹ä¼ å…¥çš„åºåˆ—ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ è¿›è¡Œè®¡ç®—åå¾—åˆ°è®¡ç®—ç»“æœã€å†å°†è¿™ä¸ªç»“æœå¯¹ä¸‹ä¸€ä¸ªå…ƒç´ è¿›è¡Œè®¡ç®—ï¼Œç›´è‡³ç»“æŸã€‚åœ¨ä½¿ç”¨Pythonæ•°æ®æ¸…æ´—æ—¶ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°å¯ä»¥æœ‰æ•ˆå‡å°‘ä»£ç å†—ä½™ã€æå‡è®¡ç®—æ•ˆç‡ç­‰ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="pythonæ•°æ®æ¸…æ´—" scheme="https://qushuxian.github.io/categories/python%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97/"/>
    
    
    <category term="map" scheme="https://qushuxian.github.io/tags/map/"/>
    
    <category term="reduce" scheme="https://qushuxian.github.io/tags/reduce/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨Pythonè‡ªåŠ¨åˆ›å»ºHexoåšå®¢å¹¶ç”Ÿæˆåšå®¢ç¼©ç•¥å›¾</title>
    <link href="https://qushuxian.github.io/page/guidebook/automatic_create_hexo/"/>
    <id>https://qushuxian.github.io/page/guidebook/automatic_create_hexo/</id>
    <published>2021-08-03T02:35:29.000Z</published>
    <updated>2021-08-03T02:35:29.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä½¿ç”¨Pythonå°è£…hexoåšå®¢æ¡†æ¶çš„shellè„šæœ¬ï¼Œå®ç°è¿è¡ŒPythonç¨‹åºå°±èƒ½è‡ªåŠ¨åŒ–åˆ›å»ºhexoåšå®¢ã€åŒæ—¶å®ç°éšæœºç»™å‡ºåšå®¢ä½¿ç”¨çš„ç¼©ç•¥å›¾çš„URLã€‚</p><span id="more"></span><br><h2 id="æœ€ç»ˆæ•ˆæœå±•ç¤º"><a class="markdownIt-Anchor" href="#æœ€ç»ˆæ•ˆæœå±•ç¤º"></a> æœ€ç»ˆæ•ˆæœå±•ç¤º</h2><ul><li>Pythonåˆ›å»ºè„šæœ¬æ•ˆæœ</li></ul><img src="image-20210803104239281.png" alt="image-20210803104239281" style="zoom:50%;" /><ul><li>åˆ›å»ºåç”Ÿæˆçš„æ–‡ä»¶æ•ˆæœ</li></ul><img src="image-20210803104431365.png" alt="image-20210803104431365" style="zoom:50%;" /><ul><li><p><span id='thumbnail_url'>åˆ›å»ºåç”Ÿæˆçš„ç¼©ç•¥å›¾æ•ˆæœ</span></p><p>æ­¤å¤„éœ€è¦æ³¨æ„ï¼Œä½ çš„hexoä¸»é¢˜æ–‡ä»¶è¦æ”¯æŒåšå®¢çš„ç¼©ç•¥çš„æ‰å¯ä»¥ï¼Œæˆ‘å½“å‰ä½¿ç”¨çš„ä¸»é¢˜æ˜¯pureï¼Œç¼©ç•¥å›¾éœ€è¦å­˜æ”¾åœ¨ä¸»é¢˜çš„sourceæ–‡ä»¶å¤¹ä¸‹ï¼Œå¦‚ä¸‹å›¾ã€‚</p></li></ul><img src="image-20210803105347111.png" alt="image-20210803105347111" style="zoom:50%;" /><table><thead><tr><th>mdæ–‡ä»¶å¤´</th><th>æ•ˆæœ</th></tr></thead><tbody><tr><td>â€”<br/>title: ä½¿ç”¨Pythonè‡ªåŠ¨åˆ›å»ºHexoåšå®¢å¹¶ç”Ÿæˆåšå®¢ç¼©ç•¥å›¾<br/>thumbnail_url: /images/default_img/blog-default-4.jpg<br/>date: 2021-08-03 10:35:29<br/>â€”</td><td><img src="image-20210803113836515.png" alt="image-20210803113836515" style="zoom:50%;" /></td></tr></tbody></table><br><h2 id="pythonè„šæœ¬è‡ªåŠ¨åˆ›å»ºhexoåšå®¢å¹¶ç”Ÿæˆåšå®¢ç¼©ç•¥å›¾è¿‡ç¨‹"><a class="markdownIt-Anchor" href="#pythonè„šæœ¬è‡ªåŠ¨åˆ›å»ºhexoåšå®¢å¹¶ç”Ÿæˆåšå®¢ç¼©ç•¥å›¾è¿‡ç¨‹"></a> Pythonè„šæœ¬è‡ªåŠ¨åˆ›å»ºHexoåšå®¢å¹¶ç”Ÿæˆåšå®¢ç¼©ç•¥å›¾è¿‡ç¨‹</h2><ol><li><p>é¦–å…ˆåœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºmain.pyæ–‡ä»¶ï¼Œå½“ç„¶åå­—ä¹Ÿå¯ä»¥è‡ªå·±å®šã€‚</p></li><li><p>åˆ›å»ºé¡¹ç›®ç›®å½•æ£€æŸ¥å‡½æ•°ï¼Œé˜²æ­¢main.pyä¸æ˜¯åœ¨æ ¹ç›®å½•ä¸‹æ‰§è¡Œã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ­¤å¤„çš„devå°±æ˜¯é¡¹ç›®çš„æ ¹ç›®å½•åç§°ï¼Œéœ€è¦æ ¹æ®è‡ªå·±çš„æƒ…å†µè¿›è¡Œå‘½å</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_mkdir</span>(<span class="params">path=<span class="literal">None</span>, root_name=<span class="string">&#x27;dev&#x27;</span></span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;è·å–é¡¹ç›®æ ¹ç›®å½•è·¯å¾„ä»¥åŠæ ¹ç›®å½•ä¸‹æŒ‡å®špathçš„è·¯å¾„&quot;&quot;&quot;</span></span><br><span class="line">    root = os.path.dirname(__file__)</span><br><span class="line">    <span class="keyword">if</span> root.split(<span class="string">&#x27;/&#x27;</span>)[-<span class="number">1</span>] != root_name:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;é¡¹ç›®æ ¹ç›®å½•ä¸æ­£ç¡®ï¼Œè¯·æ£€æŸ¥&#x27;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">if</span> path <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> root</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            root_nex = os.path.join(root, path)</span><br><span class="line">            <span class="keyword">return</span> root_nex</span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹åšå®¢é»˜è®¤çš„ç¼©ç•¥å›¾ã€‚å‰è¾¹æåˆ°çš„åˆ›å»ºåšå®¢åä¼š<a href="#thumbnail_url">ç”Ÿæˆé»˜è®¤çš„ç¼©ç•¥å›¾</a>ï¼Œä½†æ‰€æœ‰çš„åšå®¢éƒ½ä½¿ç”¨åŒä¸€ä¸ªç¼©ç•¥å›¾ä¼šä¸å¤ªç¾è§‚ï¼Œäºæ˜¯å°±æœ‰äº†é’ˆå¯¹ç¼©ç•¥å›¾è‡ªåŠ¨ä¿®æ”¹çš„Pythonè„šæœ¬ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_random_blog_images</span>(<span class="params">default_path=<span class="string">&#x27;themes/pure/source/images/default_img&#x27;</span>, prd_path=<span class="string">&#x27;/images/default_img/&#x27;</span></span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;è·å–blogç¼©ç•¥å›¾é»˜è®¤çš„å›¾ç‰‡åˆ—è¡¨å¹¶éšæœºé€‰æ‹©ä¸€ä¸ªï¼Œæ‹¼æ¥ç”Ÿæˆçº¿ä¸Šä½¿ç”¨çš„URL&quot;&quot;&quot;</span></span><br><span class="line">    mkdir = _mkdir(default_path)</span><br><span class="line">    default_image_list = get_file_path(mkdir)</span><br><span class="line">    default_images = random.choice(default_image_list).split(<span class="string">&#x27;/&#x27;</span>)[-<span class="number">1</span>]</span><br><span class="line">    image_path = prd_path + default_images</span><br><span class="line">    <span class="keyword">return</span> image_path</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x27;thumbnail_url: &#x27;æ˜¯ä½ åœ¨post.mdæ¨¡æ¿æ–‡ä»¶å¤´ä¸­åˆ›å»ºçš„ç¼©ç•¥å›¾å˜é‡ï¼ˆå­—æ®µï¼‰åç§°</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_revise_blog_thumbnail_url</span>(<span class="params">blog_path, blog_thumbnail=<span class="string">&#x27;thumbnail_url: &#x27;</span></span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;åˆ›å»ºæ–°åšå®¢åï¼Œè¾“å…¥æ–°åšå®¢çš„è·¯å¾„ä¿¡æ¯ä¿®æ”¹é»˜è®¤çš„ç¼©ç•¥å›¾URL&quot;&quot;&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;     ä¿®æ”¹åšå®¢ç¼©ç•¥å›¾URL&#x27;</span>)</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(blog_path) <span class="keyword">as</span> f:</span><br><span class="line">        blog = f.readlines()</span><br><span class="line">        <span class="comment"># è·å–åšå®¢ä¸­é»˜è®¤ç¼©ç•¥å›¾çš„è·¯å¾„ï¼Œä¸‹æ ‡</span></span><br><span class="line">        thumbnail_url = [img <span class="keyword">for</span> img <span class="keyword">in</span> blog <span class="keyword">if</span> blog_thumbnail <span class="keyword">in</span> img]</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;     åˆ›å»ºçš„åšå®¢ä¸­ä½¿ç”¨çš„ç¼©ç•¥å›¾ï¼š&#x27;</span>, thumbnail_url[<span class="number">0</span>])</span><br><span class="line">        thumbnail_url_index = blog.index(thumbnail_url[<span class="number">0</span>])</span><br><span class="line">        <span class="comment"># è·å–éšæœºç¼©ç•¥å›¾ï¼Œæ›¿æ¢åšå®¢ä¸­é»˜è®¤çš„thumbnail_url</span></span><br><span class="line">        random_blog_images = _random_blog_images() + <span class="string">&#x27;\n&#x27;</span></span><br><span class="line">        random_blog_images = blog_thumbnail + random_blog_images</span><br><span class="line">        blog[thumbnail_url_index] = random_blog_images</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;     ä¿®æ”¹ååšå®¢ä¸­ä½¿ç”¨çš„ç¼©ç•¥å›¾ï¼š&#x27;</span>, random_blog_images)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(blog_path, <span class="string">&#x27;w+&#x27;</span>) <span class="keyword">as</span> w:</span><br><span class="line">        w.writelines(blog)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;     åšå®¢ç¼©ç•¥å›¾URLä¿®æ”¹æˆåŠŸ&#x27;</span>)</span><br></pre></td></tr></table></figure></li><li><p>å®šä¹‰ä¸€ä¸ªäº¤äº’å‡½æ•°ï¼Œè®©è¿è¡Œmain.pyæ–‡ä»¶æ—¶èƒ½å¤Ÿè¿›è¡Œè¾“å…¥æ“ä½œã€‚</p><p><code>ä¸‹è¾¹çš„&quot;2 ç¼–è¯‘åšå®¢å†…å®¹å¹¶ä¸Šä¼ åˆ°Githubä»“åº“&quot;æš‚ä¸”ä¸è¡¨ï¼Œä»¥åæœ‰æ—¶é—´å†å±•å¼€è®²ï¼Œè®¡åˆ’æ˜¯å®ç°åšå®¢å†…å®¹ä¸­çš„å›¾ç‰‡URLæ›¿æ¢ã€æœç´¢å¼•æ“çš„è‡ªåŠ¨æäº¤ç­‰ç­‰å§</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run_code</span>():</span></span><br><span class="line">    types = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    è¯¥ç¨‹åºæä¾›å¦‚ä¸‹æœåŠ¡å†…å®¹ï¼š</span></span><br><span class="line"><span class="string">        1 åˆ›å»ºæ–°åšå®¢</span></span><br><span class="line"><span class="string">        2 ç¼–è¯‘åšå®¢å†…å®¹å¹¶ä¸Šä¼ åˆ°Githubä»“åº“</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">    è¯·è¾“å…¥éœ€è¦æ“ä½œçš„åºå·:</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(types)</span><br><span class="line">    inputs = <span class="built_in">input</span>()</span><br><span class="line">    <span class="keyword">if</span> <span class="number">1</span> &lt;= <span class="built_in">int</span>(inputs) &lt;= <span class="number">2</span>:</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 1 åˆ›å»ºæ–°åšå®¢</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">int</span>(inputs) == <span class="number">1</span>:</span><br><span class="line">            os.system(<span class="string">&#x27;cd &#123;0&#125;&#x27;</span>.<span class="built_in">format</span>(_mkdir()))</span><br><span class="line">            create_blog_name, create_blog_id, create_blog_path = <span class="built_in">input</span>(<span class="string">&#x27;è¯·è¾“å…¥æ–‡ç« æ ‡é¢˜:&#x27;</span>), <span class="built_in">input</span>(<span class="string">&#x27;è¯·è¾“å…¥æ–‡ç« ID(urlä½¿ç”¨):&#x27;</span>), <span class="built_in">input</span>(<span class="string">&#x27;è¯·è¾“å…¥æ–‡ç« æ‰€å±æ–‡ä»¶å¤¹åç§°:&#x27;</span>)</span><br><span class="line">            create_blog = create_blog_path + <span class="string">&#x27;/&#x27;</span> + create_blog_id + <span class="string">&#x27; &quot;&#x27;</span> + create_blog_name + <span class="string">&#x27;&quot;&#x27;</span></span><br><span class="line">            revise_url = create_blog_path + <span class="string">&#x27;/&#x27;</span> + create_blog_id</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;å°†åˆ›å»ºåšå®¢å†…å®¹ï¼š&#x27;</span>, create_blog)</span><br><span class="line">            create_type = os.system(<span class="string">&#x27;hexo new post --path &#123;0&#125;&#x27;</span>.<span class="built_in">format</span>(create_blog))</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">int</span>(create_type) == <span class="number">0</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&#x27;åˆ›å»ºæˆåŠŸ&#x27;</span>)</span><br><span class="line">                _revise_blog_thumbnail_url(<span class="string">&#x27;source/_posts/&#x27;</span> + revise_url + <span class="string">&#x27;.md&#x27;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&#x27;åˆ›å»ºå¼‚å¸¸ï¼Œè¯·æ£€æŸ¥&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 2 ç¼–è¯‘åšå®¢å†…å®¹å¹¶ä¸Šä¼ åˆ°Githubä»“åº“</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">int</span>(inputs) == <span class="number">2</span>:</span><br><span class="line">            _revise_blog_img_url()</span><br><span class="line">            os.system(<span class="string">&#x27;cd &#123;0&#125;&#x27;</span>.<span class="built_in">format</span>(_mkdir()))</span><br><span class="line">            <span class="comment"># os.system(&#x27;hexo clean &amp;&amp; hexo deploy&#x27;)</span></span><br><span class="line">            os.system(<span class="string">&#x27;hexo clean&#x27;</span>)</span><br><span class="line">            os.system(<span class="string">&#x27;hexo generate&#x27;</span>)</span><br><span class="line">            os.system(<span class="string">&#x27;cp -rf ../README.md public/&#x27;</span>)</span><br><span class="line">            os.system(<span class="string">&#x27;hexo deploy&#x27;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;è¾“å…¥é”™è¯¯ï¼Œè¯·è¾“å…¥(1-2)åºå·ä¸­éœ€è¦æ“ä½œçš„æ•°å­—&#x27;</span>)</span><br></pre></td></tr></table></figure></li></ol><p>OKï¼Œä½¿ç”¨Pythonè‡ªåŠ¨åˆ›å»ºHexoåšå®¢å¹¶ç”Ÿæˆåšå®¢ç¼©ç•¥å›¾çš„å®Œæ•´å†…å®¹å°±è¿™äº›ï¼Œéå¸¸ç®€å•ä¸”å®¹æ˜“ä¸Šæ‰‹ã€‚</p><p>å®Œæ•´çš„ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># @Author : æ›²ä¹¦è´¤</span></span><br><span class="line"><span class="comment"># @File : main.py</span></span><br><span class="line"><span class="comment"># @CreateTime : 2021/7/07 15:50</span></span><br><span class="line"><span class="comment"># @Software : PyCharm</span></span><br><span class="line"><span class="comment"># @Comment : hexoåˆ›å»ºã€æ¸²æŸ“å’Œå‘å¸ƒåšå®¢è‡ªåŠ¨åŒ–è„šæœ¬</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">from</span> util.get <span class="keyword">import</span> get_file_path</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_mkdir</span>(<span class="params">path=<span class="literal">None</span>, root_name=<span class="string">&#x27;dev&#x27;</span></span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;è·å–é¡¹ç›®æ ¹ç›®å½•è·¯å¾„ä»¥åŠæ ¹ç›®å½•ä¸‹æŒ‡å®špathçš„è·¯å¾„&quot;&quot;&quot;</span></span><br><span class="line">    root = os.path.dirname(__file__)</span><br><span class="line">    <span class="keyword">if</span> root.split(<span class="string">&#x27;/&#x27;</span>)[-<span class="number">1</span>] != root_name:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;é¡¹ç›®æ ¹ç›®å½•ä¸æ­£ç¡®ï¼Œè¯·æ£€æŸ¥&#x27;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">if</span> path <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> root</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            root_nex = os.path.join(root, path)</span><br><span class="line">            <span class="keyword">return</span> root_nex</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_random_blog_images</span>(<span class="params">default_path=<span class="string">&#x27;themes/pure/source/images/default_img&#x27;</span>, prd_path=<span class="string">&#x27;/images/default_img/&#x27;</span></span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;è·å–blogç¼©ç•¥å›¾é»˜è®¤çš„å›¾ç‰‡åˆ—è¡¨å¹¶éšæœºé€‰æ‹©ä¸€ä¸ªï¼Œæ‹¼æ¥ç”Ÿæˆçº¿ä¸Šä½¿ç”¨çš„URL&quot;&quot;&quot;</span></span><br><span class="line">    mkdir = _mkdir(default_path)</span><br><span class="line">    default_image_list = get_file_path(mkdir)</span><br><span class="line">    default_images = random.choice(default_image_list).split(<span class="string">&#x27;/&#x27;</span>)[-<span class="number">1</span>]</span><br><span class="line">    image_path = prd_path + default_images</span><br><span class="line">    <span class="keyword">return</span> image_path</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_revise_blog_thumbnail_url</span>(<span class="params">blog_path, blog_thumbnail=<span class="string">&#x27;thumbnail_url: &#x27;</span></span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;åˆ›å»ºæ–°åšå®¢åï¼Œä¿®æ”¹é»˜è®¤çš„ç¼©ç•¥å›¾URL&quot;&quot;&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;     ä¿®æ”¹åšå®¢ç¼©ç•¥å›¾URL&#x27;</span>)</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(blog_path) <span class="keyword">as</span> f:</span><br><span class="line">        blog = f.readlines()</span><br><span class="line">        <span class="comment"># è·å–åšå®¢ä¸­é»˜è®¤ç¼©ç•¥å›¾çš„è·¯å¾„ï¼Œä¸‹æ ‡</span></span><br><span class="line">        thumbnail_url = [img <span class="keyword">for</span> img <span class="keyword">in</span> blog <span class="keyword">if</span> blog_thumbnail <span class="keyword">in</span> img]</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;     åˆ›å»ºçš„åšå®¢ä¸­ä½¿ç”¨çš„ç¼©ç•¥å›¾ï¼š&#x27;</span>, thumbnail_url[<span class="number">0</span>])</span><br><span class="line">        thumbnail_url_index = blog.index(thumbnail_url[<span class="number">0</span>])</span><br><span class="line">        <span class="comment"># è·å–éšæœºç¼©ç•¥å›¾ï¼Œæ›¿æ¢åšå®¢ä¸­é»˜è®¤çš„thumbnail_url</span></span><br><span class="line">        random_blog_images = _random_blog_images() + <span class="string">&#x27;\n&#x27;</span></span><br><span class="line">        random_blog_images = blog_thumbnail + random_blog_images</span><br><span class="line">        blog[thumbnail_url_index] = random_blog_images</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;     ä¿®æ”¹ååšå®¢ä¸­ä½¿ç”¨çš„ç¼©ç•¥å›¾ï¼š&#x27;</span>, random_blog_images)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(blog_path, <span class="string">&#x27;w+&#x27;</span>) <span class="keyword">as</span> w:</span><br><span class="line">        w.writelines(blog)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;     åšå®¢ç¼©ç•¥å›¾URLä¿®æ”¹æˆåŠŸ&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run_code</span>():</span></span><br><span class="line">    types = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    è¯¥ç¨‹åºæä¾›å¦‚ä¸‹æœåŠ¡å†…å®¹ï¼š</span></span><br><span class="line"><span class="string">        1 åˆ›å»ºæ–°åšå®¢</span></span><br><span class="line"><span class="string">        2 ç¼–è¯‘åšå®¢å†…å®¹å¹¶ä¸Šä¼ åˆ°Githubä»“åº“</span></span><br><span class="line"><span class="string">    \n</span></span><br><span class="line"><span class="string">    è¯·è¾“å…¥éœ€è¦æ“ä½œçš„åºå·:</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(types)</span><br><span class="line">    inputs = <span class="built_in">input</span>()</span><br><span class="line">    <span class="keyword">if</span> <span class="number">1</span> &lt;= <span class="built_in">int</span>(inputs) &lt;= <span class="number">2</span>:</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 1 åˆ›å»ºæ–°åšå®¢</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">int</span>(inputs) == <span class="number">1</span>:</span><br><span class="line">            os.system(<span class="string">&#x27;cd &#123;0&#125;&#x27;</span>.<span class="built_in">format</span>(_mkdir()))</span><br><span class="line">            create_blog_name, create_blog_id, create_blog_path = <span class="built_in">input</span>(<span class="string">&#x27;è¯·è¾“å…¥æ–‡ç« æ ‡é¢˜:&#x27;</span>), <span class="built_in">input</span>(<span class="string">&#x27;è¯·è¾“å…¥æ–‡ç« ID(urlä½¿ç”¨):&#x27;</span>), <span class="built_in">input</span>(<span class="string">&#x27;è¯·è¾“å…¥æ–‡ç« æ‰€å±æ–‡ä»¶å¤¹åç§°:&#x27;</span>)</span><br><span class="line">            create_blog = create_blog_path + <span class="string">&#x27;/&#x27;</span> + create_blog_id + <span class="string">&#x27; &quot;&#x27;</span> + create_blog_name + <span class="string">&#x27;&quot;&#x27;</span></span><br><span class="line">            revise_url = create_blog_path + <span class="string">&#x27;/&#x27;</span> + create_blog_id</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;å°†åˆ›å»ºåšå®¢å†…å®¹ï¼š&#x27;</span>, create_blog)</span><br><span class="line">            create_type = os.system(<span class="string">&#x27;hexo new post --path &#123;0&#125;&#x27;</span>.<span class="built_in">format</span>(create_blog))</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">int</span>(create_type) == <span class="number">0</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&#x27;åˆ›å»ºæˆåŠŸ&#x27;</span>)</span><br><span class="line">                _revise_blog_thumbnail_url(<span class="string">&#x27;source/_posts/&#x27;</span> + revise_url + <span class="string">&#x27;.md&#x27;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&#x27;åˆ›å»ºå¼‚å¸¸ï¼Œè¯·æ£€æŸ¥&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 2 ç¼–è¯‘åšå®¢å†…å®¹å¹¶ä¸Šä¼ åˆ°Githubä»“åº“</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">int</span>(inputs) == <span class="number">2</span>:</span><br><span class="line">            _revise_blog_img_url()</span><br><span class="line">            os.system(<span class="string">&#x27;cd &#123;0&#125;&#x27;</span>.<span class="built_in">format</span>(_mkdir()))</span><br><span class="line">            <span class="comment"># os.system(&#x27;hexo clean &amp;&amp; hexo deploy&#x27;)</span></span><br><span class="line">            os.system(<span class="string">&#x27;hexo clean&#x27;</span>)</span><br><span class="line">            os.system(<span class="string">&#x27;hexo generate&#x27;</span>)</span><br><span class="line">            os.system(<span class="string">&#x27;cp -rf ../README.md public/&#x27;</span>)</span><br><span class="line">            os.system(<span class="string">&#x27;hexo deploy&#x27;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;è¾“å…¥é”™è¯¯ï¼Œè¯·è¾“å…¥(1-2)åºå·ä¸­éœ€è¦æ“ä½œçš„æ•°å­—&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    run_code()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¦‚æœ‰é—®é¢˜ï¼Œæ¬¢è¿ç•™è¨€~</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;ä½¿ç”¨Pythonå°è£…hexoåšå®¢æ¡†æ¶çš„shellè„šæœ¬ï¼Œå®ç°è¿è¡ŒPythonç¨‹åºå°±èƒ½è‡ªåŠ¨åŒ–åˆ›å»ºhexoåšå®¢ã€åŒæ—¶å®ç°éšæœºç»™å‡ºåšå®¢ä½¿ç”¨çš„ç¼©ç•¥å›¾çš„URLã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="Hexoç³»åˆ—" scheme="https://qushuxian.github.io/categories/Hexo%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="pythonè‡ªåŠ¨åŒ–åˆ›å»ºåšå®¢" scheme="https://qushuxian.github.io/tags/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%88%9B%E5%BB%BA%E5%8D%9A%E5%AE%A2/"/>
    
  </entry>
  
  <entry>
    <title>Gitåˆ é™¤æœ¬åœ°æäº¤è®°å½•å’ŒGitHubå¿½ç•¥æ–‡ä»¶è®¾ç½®</title>
    <link href="https://qushuxian.github.io/page/guidebook/git/"/>
    <id>https://qushuxian.github.io/page/guidebook/git/</id>
    <published>2021-07-30T03:30:44.000Z</published>
    <updated>2021-08-02T03:30:44.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä½¿ç”¨<code>git</code>æ“ä½œåˆ é™¤ä¸€äº›æœ¬åœ°é”™è¯¯æäº¤çš„è®°å½•ï¼Œ.gitignoreå¿½ç•¥æ–‡ä»¶æœªç”Ÿæ•ˆçš„è§£å†³æ–¹æ¡ˆã€‚</p><span id="more"></span><br><h2 id="æŸ¥çœ‹gitæäº¤è®°å½•"><a class="markdownIt-Anchor" href="#æŸ¥çœ‹gitæäº¤è®°å½•"></a> æŸ¥çœ‹Gitæäº¤è®°å½•</h2><p><strong><code>git log --oneline</code></strong></p><p>è¯¥å‘½ä»¤ä¸ºæŸ¥çœ‹gitæäº¤è®°å½•çš„ç²¾ç®€ç‰ˆä¿¡æ¯</p><img src="image-20210730114259071.png" alt="image-20210730114259071" style="zoom:50%;"/><p>å¦‚æœæƒ³æŸ¥çœ‹gitæäº¤è®°å½•çš„å…¨éƒ¨ä¿¡æ¯ï¼Œè¯·è¾“å…¥  <strong><code>git log</code></strong></p><img src="image-20210730114935435.png" alt="image-20210730114935435" style="zoom:67%;"/><br><h2 id="åˆ é™¤gitæäº¤åˆ°æœ¬åœ°æœ€åä¸€æ¡è®°å½•"><a class="markdownIt-Anchor" href="#åˆ é™¤gitæäº¤åˆ°æœ¬åœ°æœ€åä¸€æ¡è®°å½•"></a> åˆ é™¤Gitæäº¤åˆ°æœ¬åœ°æœ€åä¸€æ¡è®°å½•</h2><p><strong><code>git reset --hard HEAD~1</code></strong></p><p>è‹¥æƒ³è¦åˆ é™¤æœ€åæäº¤çš„nè®°å½•ï¼Œå°† 1 æ›¿æ¢ä¸ºä¸€ä¸ªå…·ä½“çš„æ•°å­— n å³å¯ã€‚</p><br><h2 id="gitignoreå¿½ç•¥æ–‡ä»¶æœªç”Ÿæ•ˆ"><a class="markdownIt-Anchor" href="#gitignoreå¿½ç•¥æ–‡ä»¶æœªç”Ÿæ•ˆ"></a> .gitignoreå¿½ç•¥æ–‡ä»¶æœªç”Ÿæ•ˆ</h2><p>åœ¨é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼ŒæŠŠç‰¹å®šç›®å½•æˆ–æ–‡ä»¶åŠ å…¥.gitignoreå¿½ç•¥è§„åˆ™ï¼Œä½†æäº¤ä»£ç æ˜¯å‘ç°å¿½ç•¥è§„åˆ™å¹¶æœªç”Ÿæ•ˆï¼Œç©¶å…¶åŸå› æ˜¯.gitignoreåªèƒ½å¿½ç•¥é‚£äº›åŸæ¥æ²¡æœ‰è¢«è·Ÿè¸ªçš„æ–‡ä»¶ï¼Œä½ åœ¨é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­åŠ å…¥å¿½ç•¥è§„åˆ™çš„æŸäº›æ–‡ä»¶æœ¬èº«å·²ç»è¢«çº³å…¥äº†ç‰ˆæœ¬ç®¡ç†ä¸­ï¼Œåˆ™ä¿®æ”¹.gitignoreæ˜¯æ— æ•ˆçš„ã€‚</p><p>é‚£ä¹ˆè§£å†³è¿™ç§é—®é¢˜çš„æ–¹æ³•å°±æ˜¯å…ˆæŠŠæœ¬åœ°Gitç¼“å­˜åˆ é™¤ï¼Œç„¶åå†æäº¤ï¼š</p><p><strong><code>git rm -r --cached .</code></strong></p><p><strong><code>git add .</code></strong></p><p><strong><code>git commit -m 'update .gitignore'</code></strong></p><p>åˆ‡è®°ï¼Œ.gitignoreæ–‡ä»¶å¿…é¡»æ˜¯åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ï¼Œå¦åˆ™ä¸ä¼šç”Ÿæ•ˆã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;ä½¿ç”¨&lt;code&gt;git&lt;/code&gt;æ“ä½œåˆ é™¤ä¸€äº›æœ¬åœ°é”™è¯¯æäº¤çš„è®°å½•ï¼Œ.gitignoreå¿½ç•¥æ–‡ä»¶æœªç”Ÿæ•ˆçš„è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="git" scheme="https://qushuxian.github.io/categories/git/"/>
    
    
    <category term="git" scheme="https://qushuxian.github.io/tags/git/"/>
    
    <category term=".gitignore" scheme="https://qushuxian.github.io/tags/gitignore/"/>
    
  </entry>
  
  <entry>
    <title>Hexoä½¿ç”¨æŒ‡å—</title>
    <link href="https://qushuxian.github.io/page/guidebook/hexo/"/>
    <id>https://qushuxian.github.io/page/guidebook/hexo/</id>
    <published>2021-07-20T07:25:15.000Z</published>
    <updated>2021-07-20T07:25:15.000Z</updated>
    
    <content type="html"><![CDATA[<p>è¯¥æ–‡ç« ä¸»è¦åŒ…å«ï¼š</p><ul><li>hexoå¸¸ç”¨shellå‘½ä»¤</li><li>ç”¨PythonåŒ…è£…å¸¸ç”¨shellå‘½ä»¤</li><li>Pythonå®ç°hexoåšå®¢éšæœºç¼©ç•¥å›¾</li><li>Pythonå®ç°hexoåšå®¢å›¾ç‰‡urlçš„è‡ªåŠ¨ä¿®æ”¹</li><li>Pythonå®ç°hexoåšå®¢è‡ªåŠ¨ç¼–è¯‘å¹¶å‘å¸ƒ</li></ul><span id="more"></span><br><h3 id="åˆ›å»ºæ–°çš„æ–‡æ¡£æ ¹ç›®å½•ä¸‹"><a class="markdownIt-Anchor" href="#åˆ›å»ºæ–°çš„æ–‡æ¡£æ ¹ç›®å½•ä¸‹"></a> åˆ›å»ºæ–°çš„æ–‡æ¡£ï¼ˆæ ¹ç›®å½•ä¸‹ï¼‰</h3><p>åœ¨æ ¹ç›®å½•ä¸­æ‰§è¡Œä¸‹åˆ—shellå‘½ä»¤ï¼Œè¡¨ç¤ºæ ¹æ®scaffoldsä¸­çš„postæ¨¡æ¿åœ¨source/_postsä¸‹åˆ›å»ºguidebook/hexoæ–‡ä»¶å¤¹ã€åŒæ—¶åˆ›å»ºåŒåçš„mdæ–‡æ¡£ï¼Œæ–‡æ¡£å†…éƒ¨æŒ‡å®šæ–‡ç« çš„æ ‡é¢˜ä¸ºHexoä½¿ç”¨æŒ‡å—</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new post --path guidebook/hexo &quot;Hexoä½¿ç”¨æŒ‡å—&quot;</span><br></pre></td></tr></table></figure><br><br><h3 id="ç¼–è¯‘mdæ–‡æ¡£"><a class="markdownIt-Anchor" href="#ç¼–è¯‘mdæ–‡æ¡£"></a> ç¼–è¯‘mdæ–‡æ¡£</h3><p>è¿è¡Œå¦‚ä¸‹å‘½ä»¤æ¸²æŸ“å¹¶ç¼–è¯‘å¼€å‘ç¯å¢ƒä¸­çš„mdæ–‡æ¡£ â†’ ç”Ÿæˆhtml â†’ æ¨é€åˆ°ä»£ç ä»“åº“</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo deploy</span><br></pre></td></tr></table></figure><br><br><h3 id="åˆ›å»ºhexoé¡¹ç›®"><a class="markdownIt-Anchor" href="#åˆ›å»ºhexoé¡¹ç›®"></a> åˆ›å»ºhexoé¡¹ç›®</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> åˆ›å»ºhexoé¡¹ç›®å¹¶å‘½åä¸ºblog</span></span><br><span class="line">hexo init blog</span><br><span class="line">cd blog</span><br></pre></td></tr></table></figure><p>åˆ›å»ºblogé¡¹ç›®åï¼Œå°†ç”Ÿæˆå¦‚ä¸‹æ–‡ä»¶ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ _config.landscape.yml</span><br><span class="line">â”œâ”€â”€ _config.yml # é…ç½®æ–‡ä»¶</span><br><span class="line">â”œâ”€â”€ db.json</span><br><span class="line">â”œâ”€â”€ node_modules # å¼€å‘ç¯å¢ƒnodeä¾èµ–</span><br><span class="line">â”œâ”€â”€ package-lock.json</span><br><span class="line">â”œâ”€â”€ package.json # hexoè¿è¡ŒæŒ‡ä»¤å’Œä¾èµ–çš„npm</span><br><span class="line">â”œâ”€â”€ scaffolds # æ¨¡æ¿æ–‡ä»¶</span><br><span class="line">â”œâ”€â”€ source # mdæ–‡æ¡£å­˜å‚¨æ–‡ä»¶ï¼Œæ¸²æŸ“æ—¶ä¼šæ ¹æ®è¯¥æ–‡ä»¶ä¸‹çš„æ–‡ä»¶è·¯å¾„å’Œæ–‡ä»¶åç§°ç”ŸæˆURLï¼Œé¿å…ä½¿ç”¨ä¸­æ–‡</span><br><span class="line">â””â”€â”€ themes # ä¸»é¢˜é…ç½®</span><br></pre></td></tr></table></figure><p>ä¸ºäº†ç¼–è¯‘åè‡ªåŠ¨æ¨é€åˆ°GitHubä»“åº“ï¼Œéœ€è¦å®‰è£…hexo-deployer-git</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><br><br><h3 id="ä¸»é¢˜è®¾ç½®"><a class="markdownIt-Anchor" href="#ä¸»é¢˜è®¾ç½®"></a> ä¸»é¢˜è®¾ç½®</h3><h4 id="yilia-plus"><a class="markdownIt-Anchor" href="#yilia-plus"></a> yilia-plus</h4><p><img src="image-20210720190956478.png" alt="image-20210720190956478" /></p><br><h4 id="pure"><a class="markdownIt-Anchor" href="#pure"></a> pure</h4><p><img src="image-20210720191518575.png" alt="image-20210720191518575" /></p><ol><li><p>è¯¥ä¸»é¢˜æ”¯æŒé¢œè‰² theme-blackï¼Œtheme-blueï¼Œtheme-greenï¼Œtheme-purple</p></li><li><p>ä½¿ç”¨è¯¥ä¸»é¢˜ï¼Œéœ€è¦å°†themes/pure/_sourceä¸‹çš„æ‰€æœ‰æ–‡ä»¶æ‹·è´è‡³æ ¹ç›®å½•ä¸‹çš„themesæ–‡ä»¶å¤¹ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">â”€â”€ source</span><br><span class="line">Â Â  â”œâ”€â”€ 404</span><br><span class="line">Â Â  â”œâ”€â”€ _data</span><br><span class="line">Â Â  â”œâ”€â”€ _posts</span><br><span class="line">Â Â  â”œâ”€â”€ about</span><br><span class="line">Â Â  â”œâ”€â”€ books</span><br><span class="line">Â Â  â”œâ”€â”€ categories</span><br><span class="line">Â Â  â”œâ”€â”€ links</span><br><span class="line">Â Â  â”œâ”€â”€ repository</span><br><span class="line">Â Â  â””â”€â”€ tags</span><br></pre></td></tr></table></figure></li><li><p>è¯¥ä¸»é¢˜çš„è¯¦ç»†é…ç½®å¯ä»¥å†themes/pure/_config.ymlè¿›è¡Œ</p></li></ol><br><br>]]></content>
    
    
    <summary type="html">&lt;p&gt;è¯¥æ–‡ç« ä¸»è¦åŒ…å«ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;hexoå¸¸ç”¨shellå‘½ä»¤&lt;/li&gt;
&lt;li&gt;ç”¨PythonåŒ…è£…å¸¸ç”¨shellå‘½ä»¤&lt;/li&gt;
&lt;li&gt;Pythonå®ç°hexoåšå®¢éšæœºç¼©ç•¥å›¾&lt;/li&gt;
&lt;li&gt;Pythonå®ç°hexoåšå®¢å›¾ç‰‡urlçš„è‡ªåŠ¨ä¿®æ”¹&lt;/li&gt;
&lt;li&gt;Pythonå®ç°hexoåšå®¢è‡ªåŠ¨ç¼–è¯‘å¹¶å‘å¸ƒ&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="Hexoç³»åˆ—" scheme="https://qushuxian.github.io/categories/Hexo%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="hexo" scheme="https://qushuxian.github.io/tags/hexo/"/>
    
  </entry>
  
</feed>
